<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Falka ‚Ä¢ Valorant Agent Selector (FR/EN)</title>

  <!-- Police "style Valorant" (proche) pour les titres -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">

  <style>
    :root{
      color-scheme: dark;
      --bg:#0b0f1a;
      --panel:#0f1526;
      --panel2:#141b2e;
      --text:#e9eefc;

      --f-red:#e5393b;
      --f-cream:#e6d2ad;

      --stroke: rgba(255,255,255,.10);
      --stroke2: rgba(255,255,255,.14);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 500px at 20% 0%, rgba(229,57,59,.20), transparent 60%),
        radial-gradient(700px 420px at 80% 15%, rgba(230,210,173,.12), transparent 55%),
        var(--bg);
      color:var(--text);
    }
    header{
      padding:14px 16px;
      border-bottom:1px solid var(--stroke);
      position:sticky; top:0; z-index:10;
      background: linear-gradient(180deg, rgba(11,15,26,.92), rgba(11,15,26,.86));
      backdrop-filter: blur(8px);
    }
    .headerWrap{
      max-width:980px; margin:0 auto;
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; flex-wrap:wrap;
    }
    .brand{ display:flex; align-items:center; gap:12px; min-width:260px; }
    .logo{
      width:42px; height:42px; border-radius:14px;
      border:1px solid var(--stroke2);
      background:#000; object-fit:cover;
    }
    .brandText{ display:flex; flex-direction:column; line-height:1; }
    .pseudo{
      font-family:"Bebas Neue", system-ui, sans-serif;
      letter-spacing:.10em; font-size:26px; color:var(--text);
    }
    .subbrand{ margin-top:4px; font-size:12px; color:rgba(233,238,252,.72); }
    .controls{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    label.muted{ color: rgba(233,238,252,.70); font-size:13px; }
    select, button{
      background: var(--panel2); color: var(--text);
      border: 1px solid var(--stroke2);
      border-radius: 12px;
      padding: 10px 12px;
      cursor: pointer;
    }
    button.primary{
      background: linear-gradient(135deg, rgba(229,57,59,.95), rgba(229,57,59,.78));
      border-color: rgba(255,255,255,.14);
      box-shadow: 0 12px 34px rgba(229,57,59,.18);
    }
    button.ghost{ background: transparent; }

    main{ max-width:980px; margin:0 auto; padding:18px 16px 18px; }
    .card{
      background: linear-gradient(180deg, rgba(15,21,38,.92), rgba(15,21,38,.86));
      border:1px solid var(--stroke);
      border-radius:18px;
      padding:16px;
      margin:14px 0;
      box-shadow: 0 10px 34px rgba(0,0,0,.28);
    }
    .title{
      font-family:"Bebas Neue", system-ui, sans-serif;
      letter-spacing:.08em;
      font-size:44px;
      margin:10px 0 6px;
    }
    .muted{ color: rgba(233,238,252,.74); }
    .row{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .pill{
      padding:7px 11px; border-radius:999px;
      border:1px solid var(--stroke2);
      background: rgba(20,27,46,.72);
      font-size:13px;
    }
    .pill.red{ border-color: rgba(229,57,59,.55); box-shadow: inset 0 0 0 1px rgba(229,57,59,.10); }
    .pill.cream{ border-color: rgba(230,210,173,.45); box-shadow: inset 0 0 0 1px rgba(230,210,173,.08); }
    .qtitle{ font-size:18px; font-weight:800; margin:6px 0 10px; }
    .answers{ display:grid; gap:10px; }
    .ans{
      text-align:left;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--stroke2);
      background: rgba(20,27,46,.95);
      transition: transform .05s ease, border-color .12s ease, box-shadow .12s ease;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .ans:hover{
      transform: translateY(-1px);
      border-color: rgba(230,210,173,.28);
      box-shadow: 0 10px 26px rgba(0,0,0,.20);
    }
    .footerBtns{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; }
    .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    @media (max-width:720px){ .grid2{ grid-template-columns:1fr; } }
    .resultBig{
      font-family:"Bebas Neue", system-ui, sans-serif;
      letter-spacing:.08em;
      font-size:40px;
      margin:10px 0 0;
    }
    .scoreWrap{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .scoreLine{
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      padding:10px 12px; border-radius:14px;
      background: rgba(20,27,46,.95);
      border:1px solid var(--stroke);
      width:min(420px,100%);
    }
    .scoreLine b{ font-weight:900; }

    footer{ max-width:980px; margin:0 auto; padding:0 16px 34px; }
    .footerCard{
      background: linear-gradient(180deg, rgba(15,21,38,.92), rgba(15,21,38,.80));
      border:1px solid var(--stroke);
      border-radius:18px;
      padding:16px;
      box-shadow: 0 10px 34px rgba(0,0,0,.22);
    }
    .footerTitle{
      font-family:"Bebas Neue", system-ui, sans-serif;
      letter-spacing:.08em;
      font-size:26px;
      margin:0 0 8px;
    }
    .socialList{ display:grid; gap:10px; margin-top:10px; }
    .socialItem{
      display:flex; justify-content:space-between; align-items:center; gap:10px;
      padding:12px 12px; border-radius:14px;
      border:1px solid var(--stroke);
      background: rgba(20,27,46,.75);
    }
    .socialLeft{ display:flex; align-items:center; gap:10px; }
    .badge{
      width:10px; height:10px; border-radius:999px;
      background: var(--f-red);
      box-shadow: 0 0 0 4px rgba(229,57,59,.10);
    }
    .socialName{ font-weight:800; }
    .socialLink a{ color: var(--f-cream); text-decoration:none; font-weight:800; }
    .socialLink a:hover{ text-decoration:underline; }
  </style>
</head>

<body>
  <header>
    <div class="headerWrap">
      <div class="brand">
        <img class="logo" src="falka-logo.png" alt="Logo Falka" />
        <div class="brandText">
          <div class="pseudo">FALKA</div>
          <div class="subbrand" id="subbrand">Agent Selector ‚Ä¢ Valorant</div>
        </div>
      </div>

      <div class="controls">
        <label class="muted" for="langSel" id="langLabel">Langue</label>
        <select id="langSel" aria-label="Language">
          <option value="fr">üá´üá∑ Fran√ßais</option>
          <option value="en">üá¨üáß English</option>
        </select>
        <button class="ghost" id="restartBtn">Recommencer</button>
      </div>
    </div>
  </header>

  <main>
    <div class="card" id="introCard">
      <div class="row">
        <span class="pill red" id="pill1">10 + 10 questions</span>
        <span class="pill cream" id="pill2">R√¥le ‚Üí Agent</span>
        <span class="pill" id="pill3">D√©partage si √©galit√©</span>
      </div>

      <div class="title" id="title">Quel agent Valorant te correspond ?</div>
      <p class="muted" id="subtitle" style="margin:0;">
        10 questions pour trouver ton r√¥le, puis 10 questions pour trouver ton agent dans ce r√¥le.
      </p>

      <div class="footerBtns">
        <button class="primary" id="startBtn">Commencer</button>
      </div>

      <p class="muted" id="disclaimer" style="margin-top:10px; font-size:13px;">
        Note : ce quiz donne une recommandation bas√©e sur ton style. Mets √† jour la liste d‚Äôagents si Riot en ajoute.
      </p>
    </div>

    <div class="card" id="quizCard" style="display:none;">
      <div class="row" style="justify-content:space-between; align-items:center;">
        <div class="muted" id="progress">Question 1 / 10</div>
        <span class="pill" id="phaseHint">Phase : R√¥le</span>
      </div>

      <div class="qtitle" id="qText">...</div>
      <div class="answers" id="answers"></div>

      <div class="footerBtns">
        <button id="backBtn">Retour</button>
      </div>
    </div>

    <div class="card" id="tiebreakCard" style="display:none;">
      <div class="row" style="justify-content:space-between; align-items:center;">
        <div class="muted" id="tbTitle">Question bonus</div>
        <span class="pill red" id="tbBadge">D√©cision finale</span>
      </div>

      <div class="qtitle" id="tbText">...</div>
      <div class="answers" id="tbAnswers"></div>
      <p class="muted" id="tbHint" style="margin:10px 0 0; font-size:12px;"></p>
    </div>

    <div class="card" id="resultCard" style="display:none;">
      <div class="row">
        <span class="pill red" id="pillMain">Agent principal</span>
        <span class="pill cream" id="pillAlt">Alternatives</span>
      </div>

      <div class="resultBig" id="mainAgent">‚Äî</div>
      <p class="muted" id="mainExplain" style="margin-top:0;">‚Äî</p>

      <div class="grid2" style="margin-top:12px;">
        <div class="card" style="margin:0;">
          <b id="alt1Title">Alternative #1</b>
          <div style="margin-top:8px; font-size:22px; font-weight:900;" id="alt1Agent">‚Äî</div>
          <div class="muted" id="alt1Why" style="margin-top:6px;">‚Äî</div>
        </div>
        <div class="card" style="margin:0;">
          <b id="alt2Title">Alternative #2</b>
          <div style="margin-top:8px; font-size:22px; font-weight:900;" id="alt2Agent">‚Äî</div>
          <div class="muted" id="alt2Why" style="margin-top:6px;">‚Äî</div>
        </div>
      </div>

      <h3 style="margin:16px 0 8px;" id="scoreTitle">Scores (agents)</h3>
      <div class="scoreWrap" id="scoreLines"></div>

      <div class="footerBtns">
        <button class="primary" id="retryBtn">Refaire le quiz</button>
        <button id="copyBtn">Copier le r√©sultat</button>
      </div>

      <p class="muted" id="noteMeta" style="margin-top:10px; font-size:13px;">
        Astuce : r√©ponds en pensant √† tes derniers matchs, pas √† ton humeur du moment.
      </p>
    </div>
  </main>

  <footer>
    <div class="footerCard">
      <div class="footerTitle" id="footerTitle">R√©seaux de Falka</div>
      <div class="muted" id="footerSubtitle">Retrouve Falka sur :</div>

      <div class="socialList">
        <div class="socialItem">
          <div class="socialLeft"><span class="badge"></span><span class="socialName">Twitch</span></div>
          <div class="socialLink"><a href="https://www.twitch.tv/falkalive" target="_blank" rel="noopener">FalkaLive</a></div>
        </div>
        <div class="socialItem">
          <div class="socialLeft"><span class="badge"></span><span class="socialName">TikTok</span></div>
          <div class="socialLink"><a href="https://www.tiktok.com/@falkalive" target="_blank" rel="noopener">Falka TikTok</a></div>
        </div>
      </div>

      <p class="muted" style="margin:12px 0 0; font-size:12px;">
        ¬© Falka ‚Ä¢ Fan project ‚Ä¢ Valorant est une marque de Riot Games.
      </p>
    </div>
  </footer>

<script>
(() => {
  // -------------------------
  // Helpers
  // -------------------------
  const $ = (id) => document.getElementById(id);
  const clamp0 = (n) => Math.max(0, n);
  const initScoreMap = (keys) => Object.fromEntries(keys.map(k => [k, 0]));
  const sortedKeys = (scoreMap) => Object.entries(scoreMap)
    .map(([k,v]) => ({k,v}))
    .sort((a,b)=> b.v - a.v || a.k.localeCompare(b.k))
    .map(e => e.k);

  // Shuffle (Fisher‚ÄìYates)
  function shuffleArray(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  // -------------------------
  // Labels
  // -------------------------
  const LABELS = {
    fr: {
      language:"Langue", restart:"Recommencer", start:"Commencer", back:"Retour",
      phaseRole:"Phase : R√¥le", phaseAgent:"Phase : Agent",
      tiebreakTitle:"Question bonus", tiebreakBadge:"D√©cision finale",
      tiebreakHint:"(Cette question n‚Äôappara√Æt qu‚Äôen cas d‚Äô√©galit√©.)",
      retake:"Refaire le quiz", copy:"Copier le r√©sultat", copied:"Copi√© ‚úÖ",
      scores:"Scores (agents)",
      alt1:"Alternative #1", alt2:"Alternative #2",
      socialsTitle:"R√©seaux de Falka", socialsSub:"Retrouve Falka sur :",
      introTitle:"Quel agent Valorant te correspond ?",
      introSub:"10 questions pour trouver ton r√¥le, puis 10 questions pour trouver ton agent dans ce r√¥le.",
      note:"Astuce : r√©ponds en pensant √† tes derniers matchs, pas √† ton humeur du moment.",
      roleExplain: {
        duelist: "Profil Duelist : impact direct, duels, prise d‚Äôespace.",
        initiator:"Profil Initiator : info + facilitation d‚Äôentr√©e.",
        controller:"Profil Controller : contr√¥le des lignes de vue et du tempo.",
        sentinel:"Profil Sentinel : s√©curit√©, tenue et anti-flank."
      }
    },
    en: {
      language:"Language", restart:"Restart", start:"Start", back:"Back",
      phaseRole:"Phase: Role", phaseAgent:"Phase: Agent",
      tiebreakTitle:"Bonus question", tiebreakBadge:"Final decision",
      tiebreakHint:"(This only appears if there‚Äôs a tie.)",
      retake:"Retake quiz", copy:"Copy result", copied:"Copied ‚úÖ",
      scores:"Scores (agents)",
      alt1:"Alternative #1", alt2:"Alternative #2",
      socialsTitle:"Falka‚Äôs socials", socialsSub:"Find Falka on:",
      introTitle:"Which Valorant agent fits you?",
      introSub:"10 questions to find your role, then 10 questions to find your agent within that role.",
      note:"Tip: answer thinking about your latest matches, not your current mood.",
      roleExplain: {
        duelist: "Duelist profile: direct impact, duels, space-taking.",
        initiator:"Initiator profile: info + enabling entries.",
        controller:"Controller profile: sightline and tempo control.",
        sentinel:"Sentinel profile: security, holding, anti-flank."
      }
    }
  };

  // -------------------------
  // Phase 1 - ROLE questions
  // -------------------------
  const ROLE_QUESTIONS = [
    {
      fr:{ q:"Ton style naturel en d√©but de round ?", a:[
        ["J‚Äôentre en premier, je prends les duels.","duelist"],
        ["Je pr√©pare l‚Äôentr√©e avec mes utilitaires.","initiator"],
        ["Je contr√¥le la map avec des smokes.","controller"],
        ["Je s√©curise les arri√®res et je prot√®ge.","sentinel"],
      ]},
      en:{ q:"Your natural style at round start?", a:[
        ["I entry first and take duels.","duelist"],
        ["I prepare the entry with utility.","initiator"],
        ["I control space with smokes.","controller"],
        ["I lock down and protect flanks.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Quelle est ta plus grande force ?", a:[
        ["Mon aim.","duelist"],
        ["Ma communication / cr√©ation d‚Äôouverture.","initiator"],
        ["Ma vision strat√©gique.","controller"],
        ["Mon intelligence de jeu (timings, holds).","sentinel"],
      ]},
      en:{ q:"What‚Äôs your biggest strength?", a:[
        ["My aim.","duelist"],
        ["My comms / enabling openings.","initiator"],
        ["My strategic vision.","controller"],
        ["My game sense (timings, holds).","sentinel"],
      ]}
    },
    {
      fr:{ q:"Tu pr√©f√®res gagner gr√¢ce √† :", a:[
        ["Des frags d√©cisifs.","duelist"],
        ["Des ouvertures cr√©√©es par l‚Äôinfo/flash.","initiator"],
        ["Le contr√¥le du tempo et des lignes de vue.","controller"],
        ["Des erreurs adverses punies et une d√©fense solide.","sentinel"],
      ]},
      en:{ q:"You prefer winning through:", a:[
        ["Decisive kills.","duelist"],
        ["Openings via info/flash.","initiator"],
        ["Tempo and sightline control.","controller"],
        ["Punishing mistakes with solid defense.","sentinel"],
      ]}
    },
    {
      fr:{ q:"En situation 1vX tu :", a:[
        ["Cherches le duel rapide.","duelist"],
        ["Isoles avec tes capacit√©s (flash/reveal).","initiator"],
        ["Joues le timing et la map (smokes).","controller"],
        ["Forces les adversaires √† venir dans ton setup.","sentinel"],
      ]},
      en:{ q:"In a 1vX you:", a:[
        ["Take fast duels.","duelist"],
        ["Isolate with utility (flash/reveal).","initiator"],
        ["Play timing and map control (smokes).","controller"],
        ["Force enemies into your setup.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Ton niveau d‚Äôagressivit√© est plut√¥t :", a:[
        ["Tr√®s agressif.","duelist"],
        ["Agressif mais pr√©par√©.","initiator"],
        ["Calme, je dicte le tempo.","controller"],
        ["Patient, j‚Äôattends l‚Äôerreur.","sentinel"],
      ]},
      en:{ q:"Your aggression level is:", a:[
        ["Very aggressive.","duelist"],
        ["Aggressive but prepared.","initiator"],
        ["Calm, I dictate tempo.","controller"],
        ["Patient, I wait for mistakes.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Ton r√¥le pr√©f√©r√© dans l‚Äô√©quipe ?", a:[
        ["Carry / fragger.","duelist"],
        ["Facilitateur (entr√©e, info).","initiator"],
        ["Chef d‚Äôorchestre (smokes, rotations).","controller"],
        ["Pilier d√©fensif (holds, anti-flank).","sentinel"],
      ]},
      en:{ q:"Your preferred team role?", a:[
        ["Carry / fragger.","duelist"],
        ["Facilitator (entry, info).","initiator"],
        ["Orchestrator (smokes, rotations).","controller"],
        ["Defensive anchor (holds, anti-flank).","sentinel"],
      ]}
    },
    {
      fr:{ q:"Tu te sens le plus fort :", a:[
        ["En prise de space (entry).","duelist"],
        ["En prise d‚Äôinfo et pr√©paration.","initiator"],
        ["En contr√¥le de site et d√©coupes.","controller"],
        ["En d√©fense / tenue.","sentinel"],
      ]},
      en:{ q:"You feel strongest:", a:[
        ["Taking space (entry).","duelist"],
        ["Gathering info and setting up.","initiator"],
        ["Site control and slicing angles.","controller"],
        ["On defense / holding.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Quelles capacit√©s t‚Äôattirent le plus ?", a:[
        ["Mobilit√© / dash.","duelist"],
        ["Flash / reveal / drone.","initiator"],
        ["Smokes / walls / vision denial.","controller"],
        ["Pi√®ges / ralentissements / gadgets.","sentinel"],
      ]},
      en:{ q:"Which abilities attract you most?", a:[
        ["Mobility / dash.","duelist"],
        ["Flash / reveal / drone.","initiator"],
        ["Smokes / walls / vision denial.","controller"],
        ["Traps / slows / gadgets.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Ton niveau m√©canique (m√©caniques pures) ?", a:[
        ["Tr√®s √©lev√©, je veux en profiter.","duelist"],
        ["Bon, mais je pr√©f√®re aider l‚Äôentr√©e.","initiator"],
        ["Moyen : je gagne via utilit√©.","controller"],
        ["Variable : je mise sur le placement.","sentinel"],
      ]},
      en:{ q:"Your raw mechanics level?", a:[
        ["Very high, I want to leverage it.","duelist"],
        ["Good, but I prefer enabling entry.","initiator"],
        ["Average: I win through utility.","controller"],
        ["Situational: I rely on positioning.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Tu veux √™tre :", a:[
        ["Le joueur flashy.","duelist"],
        ["Celui qui d√©clenche l‚Äôaction.","initiator"],
        ["Le cerveau du round.","controller"],
        ["Le pilier solide.","sentinel"],
      ]},
      en:{ q:"You want to be:", a:[
        ["The flashy player.","duelist"],
        ["The play starter.","initiator"],
        ["The brain of the round.","controller"],
        ["The solid anchor.","sentinel"],
      ]}
    }
  ];

  // -------------------------
  // Phase 2 - Agents / Questions
  // -------------------------
  const AGENTS_BY_ROLE = {
    duelist: ["Jett","Raze","Reyna","Phoenix","Yoru","Neon","Iso"],
    initiator: ["Sova","Skye","Fade","Breach","KAY/O","Gekko"],
    controller: ["Omen","Brimstone","Viper","Astra","Harbor","Clove"],
    sentinel: ["Killjoy","Cypher","Sage","Chamber","Deadlock"]
  };

  // ‚úÖ‚úÖ‚úÖ CORRIG√â : toutes les questions finissent par "}," (2 accolades), pas "}}}," (3)
  const Q_AGENT = {
    duelist: [
      {fr:{q:"Quand un round commence mal, ton premier r√©flexe est :",a:[
        ["Cr√©er de l‚Äôespace ailleurs.","Jett"],["Forcer un moment de chaos.","Raze"],["Chercher un duel isol√©.","Reyna"],["Revenir progressivement dans le round.","Phoenix"],["Changer compl√®tement de rythme.","Yoru"],["Acc√©l√©rer la pression.","Neon"],["Reprendre un duel frontal.","Iso"]
      ]},en:{q:"When a round starts badly, your first instinct is:",a:[
        ["Create space elsewhere.","Jett"],["Force a moment of chaos.","Raze"],["Look for an isolated duel.","Reyna"],["Work your way back into the round.","Phoenix"],["Completely change the pace.","Yoru"],["Speed up the pressure.","Neon"],["Take a straight-up duel.","Iso"]
      ]}},
      {fr:{q:"Quand tu gagnes un duel important, tu :",a:[
        ["Te replaces imm√©diatement.","Jett"],["Continues √† casser le rythme.","Raze"],["Cherches √† encha√Æner.","Reyna"],["Stabilises la situation.","Phoenix"],["Deviens impr√©visible.","Yoru"],["Maintiens l‚Äôintensit√©.","Neon"],["Restes concentr√© sur le prochain duel.","Iso"]
      ]},en:{q:"When you win an important duel, you:",a:[
        ["Reposition immediately.","Jett"],["Keep breaking the rhythm.","Raze"],["Try to chain fights.","Reyna"],["Stabilize the situation.","Phoenix"],["Become unpredictable.","Yoru"],["Keep the intensity high.","Neon"],["Focus on the next fair fight.","Iso"]
      ]}},
      {fr:{q:"Dans un round lent, tu te sens :",a:[
        ["Patient mais pr√™t √† bouger.","Jett"],["Frustr√©, tu veux que √ßa explose.","Raze"],["En attente d‚Äôune erreur.","Reyna"],["Confiant dans la dur√©e.","Phoenix"],["En train de pr√©parer quelque chose.","Yoru"],["Survolt√©.","Neon"],["Stable.","Iso"]
      ]},en:{q:"In a slow round, you feel:",a:[
        ["Patient but ready to move.","Jett"],["Frustrated ‚Äî you want it to blow up.","Raze"],["Waiting for a mistake.","Reyna"],["Confident over time.","Phoenix"],["Setting something up.","Yoru"],["Wired / hyped.","Neon"],["Steady.","Iso"]
      ]}},
      {fr:{q:"Ton plus grand atout en Duelist :",a:[
        ["Contr√¥le en mouvement.","Jett"],["Impact imm√©diat.","Raze"],["Confiance / domination mentale.","Reyna"],["Capacit√© √† revenir apr√®s un mauvais d√©part.","Phoenix"],["Cr√©ativit√© / mindgame.","Yoru"],["√ânergie / pression continue.","Neon"],["Discipline en face-√†-face.","Iso"]
      ]},en:{q:"Your biggest Duelist strength:",a:[
        ["Control while moving.","Jett"],["Immediate impact.","Raze"],["Confidence / mental dominance.","Reyna"],["Ability to bounce back.","Phoenix"],["Creativity / mindgames.","Yoru"],["Energy / constant pressure.","Neon"],["Discipline in fair duels.","Iso"]
      ]}},
      {fr:{q:"En 1v2, ton plan naturel :",a:[
        ["Repositionner pour s√©parer.","Jett"],["Provoquer une erreur via le chaos.","Raze"],["Isoler puis encha√Æner.","Reyna"],["Gagner du temps puis revenir.","Phoenix"],["Feinter pour d√©sorienter.","Yoru"],["Acc√©l√©rer pour prendre de vitesse.","Neon"],["Prendre un duel propre, puis le second.","Iso"]
      ]},en:{q:"In a 1v2, your natural plan:",a:[
        ["Reposition to split them.","Jett"],["Create mistakes through chaos.","Raze"],["Isolate then chain.","Reyna"],["Buy time then come back.","Phoenix"],["Fake to disorient.","Yoru"],["Speed up to overwhelm.","Neon"],["Take a clean duel, then the second.","Iso"]
      ]}},
      {fr:{q:"Tu veux que l‚Äôadversaire ressente :",a:[
        ["De l‚Äôincertitude face √† tes positions.","Jett"],["De la panique.","Raze"],["Qu‚Äôil est ‚Äòpunished‚Äô.","Reyna"],["Qu‚Äôil n‚Äôarrive pas √† te finir.","Phoenix"],["Qu‚Äôil est perdu.","Yoru"],["Qu‚Äôil est d√©pass√©.","Neon"],["Qu‚Äôil doit te respecter en duel.","Iso"]
      ]},en:{q:"You want the enemy to feel:",a:[
        ["Uncertainty about your positions.","Jett"],["Panic.","Raze"],["They‚Äôre being punished.","Reyna"],["They can‚Äôt finish you off.","Phoenix"],["They‚Äôre lost.","Yoru"],["They‚Äôre outpaced.","Neon"],["They must respect your duels.","Iso"]
      ]}},
      {fr:{q:"Quand tu rates un duel, tu :",a:[
        ["Ajustes ton angle et reviens ailleurs.","Jett"],["Re-forces vite pour reprendre le tempo.","Raze"],["Cherches un pick rapide pour ‚Äòreset‚Äô.","Reyna"],["Reviens plus safe et progressif.","Phoenix"],["Changes compl√®tement de pattern.","Yoru"],["Augmentes encore le rythme.","Neon"],["Reviens plus propre techniquement.","Iso"]
      ]},en:{q:"When you lose a duel, you:",a:[
        ["Adjust your angle and re-appear elsewhere.","Jett"],["Re-force quickly to take tempo back.","Raze"],["Look for a fast pick to reset.","Reyna"],["Come back safer and progressive.","Phoenix"],["Change your pattern completely.","Yoru"],["Ramp the pace up even more.","Neon"],["Return cleaner mechanically.","Iso"]
      ]}},
      {fr:{q:"Ton style par d√©faut :",a:[
        ["Fluide.","Jett"],["Intense.","Raze"],["Opportuniste.","Reyna"],["R√©sistant.","Phoenix"],["Impr√©visible.","Yoru"],["Dynamique.","Neon"],["Frontal.","Iso"]
      ]},en:{q:"Your default style:",a:[
        ["Fluid.","Jett"],["Intense.","Raze"],["Opportunistic.","Reyna"],["Resilient.","Phoenix"],["Unpredictable.","Yoru"],["Dynamic.","Neon"],["Head-on.","Iso"]
      ]}},
      {fr:{q:"En situation tr√®s tendue, tu :",a:[
        ["Cr√©es de la distance et re-angles.","Jett"],["Forces l‚Äôerreur adverse.","Raze"],["Joues le snowball mental.","Reyna"],["Gagnes du temps pour revenir.","Phoenix"],["Manipules les attentes.","Yoru"],["Submerges au rythme.","Neon"],["Cherches le duel le plus ‚Äòjuste‚Äô.","Iso"]
      ]},en:{q:"In high pressure, you:",a:[
        ["Create distance and re-angle.","Jett"],["Force an enemy mistake.","Raze"],["Play the mental snowball.","Reyna"],["Buy time to come back.","Phoenix"],["Manipulate expectations.","Yoru"],["Overwhelm with pace.","Neon"],["Look for the fairest duel.","Iso"]
      ]}},
      {fr:{q:"Quand tu sens que tu ‚Äòdomines‚Äô, tu :",a:[
        ["Varies les positions.","Jett"],["Acc√©l√®res encore et forces l‚Äôerreur.","Raze"],["Cherches √† encha√Æner les duels.","Reyna"],["Restes stable et s√©curis√©.","Phoenix"],["Changes le plan pour surprendre.","Yoru"],["Maintiens un rythme trop dur √† suivre.","Neon"],["Gagnes les duels proprement, sans surjouer.","Iso"]
      ]},en:{q:"When you feel you‚Äôre ‚Äòahead‚Äô, you:",a:[
        ["Vary your positions.","Jett"],["Speed up and force mistakes.","Raze"],["Look to chain duels.","Reyna"],["Stay stable and safe.","Phoenix"],["Switch plans to surprise.","Yoru"],["Keep a pace they can‚Äôt follow.","Neon"],["Win clean duels without overforcing.","Iso"]
      ]}}
    ],

    initiator: [
      {fr:{q:"Quand ton √©quipe h√©site, tu aides surtout en :",a:[
        ["Donnant une info claire avant d‚Äôagir.","Sova"],["Rassurant et lan√ßant l‚Äôaction.","Skye"],["Faisant sentir une pr√©sence oppressante.","Fade"],["Cr√©ant un moment ‚Äògo‚Äô tr√®s net.","Breach"],["Coupant les options adverses.","KAY/O"],["Trouvant une solution simple et pratique.","Gekko"]
      ]},en:{q:"When your team hesitates, you help by:",a:[
        ["Providing clear info before acting.","Sova"],["Reassuring and starting the action.","Skye"],["Making your presence feel oppressive.","Fade"],["Creating a very clear 'go' moment.","Breach"],["Cutting enemy options.","KAY/O"],["Finding a simple practical solution.","Gekko"]
      ]}},
      {fr:{q:"Ton utilitaire id√©al doit :",a:[
        ["Confirmer une zone sans d√©bat.","Sova"],["Ouvrir une entr√©e propre pour l‚Äô√©quipe.","Skye"],["Mettre l‚Äôadversaire mal √† l‚Äôaise.","Fade"],["D√©structurer un push d‚Äôun coup.","Breach"],["Emp√™cher les ‚Äòcombos‚Äô adverses.","KAY/O"],["Donner plusieurs petites options faciles.","Gekko"]
      ]},en:{q:"Your ideal utility should:",a:[
        ["Confirm an area clearly.","Sova"],["Open a clean entry for the team.","Skye"],["Make the enemy uncomfortable.","Fade"],["Shatter a push in one go.","Breach"],["Stop enemy combos.","KAY/O"],["Give several easy options.","Gekko"]
      ]}},
      {fr:{q:"En d√©fense, tu pr√©f√®res :",a:[
        ["Lire la map et pr√©venir t√¥t.","Sova"],["√ätre proche pour aider au contact.","Skye"],["Mettre la pression m√™me en d√©fense.","Fade"],["Casser le rythme d‚Äôun push.","Breach"],["R√©duire l‚Äôutilit√© adverse.","KAY/O"],["R√©agir vite avec des outils simples.","Gekko"]
      ]},en:{q:"On defense, you prefer:",a:[
        ["Read the map and warn early.","Sova"],["Stay close to help at contact.","Skye"],["Keep pressure even on defense.","Fade"],["Break a push‚Äôs rhythm.","Breach"],["Reduce enemy utility.","KAY/O"],["React fast with simple tools.","Gekko"]
      ]}},
      {fr:{q:"En retake, ton approche naturelle :",a:[
        ["Structurer l‚Äôinfo avant d‚Äôentrer.","Sova"],["Rentrer avec l‚Äô√©quipe et s√©curiser.","Skye"],["Traquer et isoler mentalement.","Fade"],["Cr√©er une fen√™tre d‚Äôentr√©e brutale.","Breach"],["Neutraliser les menaces utilitaires.","KAY/O"],["R√©cup√©rer la situation avec flexibilit√©.","Gekko"]
      ]},en:{q:"On retake, your natural approach:",a:[
        ["Structure info before going in.","Sova"],["Go in with the team and secure.","Skye"],["Hunt and isolate mentally.","Fade"],["Create a brutal entry window.","Breach"],["Neutralize utility threats.","KAY/O"],["Recover the situation with flexibility.","Gekko"]
      ]}},
      {fr:{q:"Tu es le plus utile quand :",a:[
        ["Tes calls sont bas√©s sur des certitudes.","Sova"],["Tu guides ton entry avec confiance.","Skye"],["Tu fais douter les ennemis.","Fade"],["Tu imposes un timing clair.","Breach"],["Tu forces les ennemis √† jouer ‚Äònu‚Äô.","KAY/O"],["Tu donnes des solutions rapides √† l‚Äô√©quipe.","Gekko"]
      ]},en:{q:"You‚Äôre most useful when:",a:[
        ["Your calls are based on certainty.","Sova"],["You guide entry with confidence.","Skye"],["You make enemies doubt.","Fade"],["You impose a clear timing.","Breach"],["You force enemies to play 'naked'.","KAY/O"],["You give fast solutions to the team.","Gekko"]
      ]}},
      {fr:{q:"Quand tu n‚Äôas pas l‚Äôinfo, tu :",a:[
        ["Cherches √† la cr√©er proprement.","Sova"],["Pr√©f√®res tester avec l‚Äô√©quipe.","Skye"],["Mets la pression pour provoquer une erreur.","Fade"],["Forces un moment pour obtenir une r√©action.","Breach"],["Coupes les options et observes.","KAY/O"],["Tentes une option simple et adaptable.","Gekko"]
      ]},en:{q:"When you lack info, you:",a:[
        ["Try to create it cleanly.","Sova"],["Prefer to test with the team.","Skye"],["Apply pressure to force mistakes.","Fade"],["Force a moment to get a reaction.","Breach"],["Cut options and observe.","KAY/O"],["Try a simple adaptable option.","Gekko"]
      ]}},
      {fr:{q:"Ton style de leadership :",a:[
        ["Analytique.","Sova"],["Encourageant.","Skye"],["Oppressant.","Fade"],["D√©cisif.","Breach"],["Anti-plan adverse.","KAY/O"],["Pratique.","Gekko"]
      ]},en:{q:"Your leadership style:",a:[
        ["Analytical.","Sova"],["Encouraging.","Skye"],["Oppressive.","Fade"],["Decisive.","Breach"],["Anti-enemy plan.","KAY/O"],["Practical.","Gekko"]
      ]}},
      {fr:{q:"Ce qui te tilt le plus :",a:[
        ["Le flou / les infos contradictoires.","Sova"],["Une √©quipe qui n‚Äôose pas entrer.","Skye"],["Des ennemis qui jouent trop safe.","Fade"],["Un push qui tra√Æne trop.","Breach"],["Une compo ennemie trop utilitaire.","KAY/O"],["Des situations ‚Äòcomplexes‚Äô pour rien.","Gekko"]
      ]},en:{q:"What tilts you most:",a:[
        ["Blur / contradictory info.","Sova"],["A team that won‚Äôt commit.","Skye"],["Enemies playing too safe.","Fade"],["A push that drags on.","Breach"],["An enemy comp too utility-heavy.","KAY/O"],["Situations complex for no reason.","Gekko"]
      ]}},
      {fr:{q:"Si tu dois r√©sumer ton impact :",a:[
        ["Info fiable.","Sova"],["Entr√©e s√©curis√©e.","Skye"],["Pression mentale.","Fade"],["Go timing.","Breach"],["Neutralisation.","KAY/O"],["Polyvalence simple.","Gekko"]
      ]},en:{q:"If you summarize your impact:",a:[
        ["Reliable info.","Sova"],["Secure entry.","Skye"],["Mental pressure.","Fade"],["Go timing.","Breach"],["Neutralization.","KAY/O"],["Simple versatility.","Gekko"]
      ]}},
      {fr:{q:"Quand √ßa part en chaos, tu :",a:[
        ["Reviens √† l‚Äôinfo pour calmer le jeu.","Sova"],["Aides ton √©quipe √† avancer ensemble.","Skye"],["Entretiens la pression pour √©touffer.","Fade"],["Cr√©es un ‚Äòstop‚Äô net dans le chaos.","Breach"],["Coupes les outils pour simplifier.","KAY/O"],["Trouves l‚Äôoption la plus simple et efficace.","Gekko"]
      ]},en:{q:"When it becomes chaotic, you:",a:[
        ["Return to info to stabilize.","Sova"],["Help your team move together.","Skye"],["Keep pressure to suffocate.","Fade"],["Create a hard stop in chaos.","Breach"],["Cut tools to simplify.","KAY/O"],["Find the simplest effective option.","Gekko"]
      ]}}
    ],

    controller: [
      {fr:{q:"Quand tu contr√¥les un round, tu pr√©f√®res :",a:[
        ["Jouer sur les timings et l‚Äôincertitude.","Omen"],["Une ex√©cution simple et carr√©e.","Brimstone"],["Asphyxier une zone dans la dur√©e.","Viper"],["Penser la carte comme un puzzle.","Astra"],["Prot√©ger le passage et avancer en s√©curit√©.","Harbor"],["Garder la capacit√© de re-fight et relancer.","Clove"]
      ]},en:{q:"When you control a round, you prefer:",a:[
        ["Play timings and uncertainty.","Omen"],["A simple clean execution.","Brimstone"],["Suffocate an area over time.","Viper"],["Treat the map like a puzzle.","Astra"],["Protect the path and move safely.","Harbor"],["Keep re-fight potential and restart fights.","Clove"]
      ]}},
      {fr:{q:"Ton utilit√© id√©ale sert √† :",a:[
        ["Cr√©er du doute chez l‚Äôennemi.","Omen"],["Structurer l‚Äôentr√©e sans prise de t√™te.","Brimstone"],["Verrouiller un plan sur plusieurs secondes.","Viper"],["Coordonner √† distance.","Astra"],["Couper proprement et prot√©ger.","Harbor"],["Mettre du tempo agressif.","Clove"]
      ]},en:{q:"Your ideal utility is for:",a:[
        ["Creating doubt in the enemy.","Omen"],["Structuring entry simply.","Brimstone"],["Locking a plan for several seconds.","Viper"],["Coordinating from distance.","Astra"],["Cutting cleanly and protecting.","Harbor"],["Bringing aggressive tempo.","Clove"]
      ]}},
      {fr:{q:"En d√©fense, tu te sens fort quand :",a:[
        ["Tu peux jouer sur le timing.","Omen"],["Tu peux tenir avec un plan clair.","Brimstone"],["Tu peux rendre une zone invivable.","Viper"],["Tu peux contr√¥ler plusieurs zones.","Astra"],["Tu peux offrir une ‚Äòsafe lane‚Äô √† l‚Äô√©quipe.","Harbor"],["Tu peux contester et recontester.","Clove"]
      ]},en:{q:"On defense, you feel strong when:",a:[
        ["You can play timing.","Omen"],["You can hold with a clear plan.","Brimstone"],["You can make an area unlivable.","Viper"],["You can control multiple areas.","Astra"],["You can give a safe lane to your team.","Harbor"],["You can contest and re-contest.","Clove"]
      ]}},
      {fr:{q:"En retake, tu pr√©f√®res :",a:[
        ["D√©placer la pression par surprise.","Omen"],["Ex√©cuter proprement en √©quipe.","Brimstone"],["Gagner du temps et user l‚Äôennemi.","Viper"],["Cr√©er l‚Äôouverture au bon moment.","Astra"],["Couvrir l‚Äôentr√©e et s√©curiser.","Harbor"],["Relancer le fight d√®s qu‚Äôil y a une fen√™tre.","Clove"]
      ]},en:{q:"On retake, you prefer:",a:[
        ["Shift pressure with surprise.","Omen"],["Execute cleanly with the team.","Brimstone"],["Buy time and wear them down.","Viper"],["Create the opening at the right time.","Astra"],["Cover entry and secure.","Harbor"],["Restart fights when a window appears.","Clove"]
      ]}},
      {fr:{q:"Ton point fort mental :",a:[
        ["Bluff / impr√©vu.","Omen"],["Discipline / r√©gularit√©.","Brimstone"],["Patience / contr√¥le long.","Viper"],["Vision macro.","Astra"],["Protection / stabilit√©.","Harbor"],["Agressivit√© contr√¥l√©e.","Clove"]
      ]},en:{q:"Your mental strength:",a:[
        ["Bluff / unpredictability.","Omen"],["Discipline / consistency.","Brimstone"],["Patience / long control.","Viper"],["Macro vision.","Astra"],["Protection / stability.","Harbor"],["Controlled aggression.","Clove"]
      ]}},
      {fr:{q:"Ce qui te tilt le plus :",a:[
        ["Quand le round est trop ‚Äòlin√©aire‚Äô.","Omen"],["Quand l‚Äô√©quipe ne suit pas le plan.","Brimstone"],["Quand on te force √† bouger sans cesse.","Viper"],["Quand le timing d‚Äô√©quipe est mauvais.","Astra"],["Quand l‚Äô√©quipe se disperse.","Harbor"],["Quand on ne profite pas des fen√™tres de fight.","Clove"]
      ]},en:{q:"What tilts you most:",a:[
        ["When a round is too linear.","Omen"],["When the team won‚Äôt follow the plan.","Brimstone"],["When you‚Äôre forced to move nonstop.","Viper"],["When team timing is bad.","Astra"],["When the team scatters.","Harbor"],["When you don‚Äôt capitalize fight windows.","Clove"]
      ]}},
      {fr:{q:"Ton style de win condition :",a:[
        ["Confusion.","Omen"],["Structure.","Brimstone"],["Zone denial durable.","Viper"],["Coordination.","Astra"],["Safe push.","Harbor"],["Momentum / re-fight.","Clove"]
      ]},en:{q:"Your win condition style:",a:[
        ["Confusion.","Omen"],["Structure.","Brimstone"],["Durable zone denial.","Viper"],["Coordination.","Astra"],["Safe push.","Harbor"],["Momentum / re-fight.","Clove"]
      ]}},
      {fr:{q:"Quand tu n‚Äôas pas le contr√¥le, tu :",a:[
        ["Cr√©es un doute et changes l‚Äôangle du round.","Omen"],["Simplifies et remets un plan clair.","Brimstone"],["Reprends une zone et la verrouilles.","Viper"],["Replaces tes pi√®ces pour reprendre la macro.","Astra"],["Prot√®ges une trajectoire et reconstruis.","Harbor"],["Contestes pour relancer la dynamique.","Clove"]
      ]},en:{q:"When you lack control, you:",a:[
        ["Create doubt and change the angle.","Omen"],["Simplify and restore a clear plan.","Brimstone"],["Reclaim an area and lock it.","Viper"],["Reposition pieces to regain macro.","Astra"],["Protect a path and rebuild.","Harbor"],["Contest to restart momentum.","Clove"]
      ]}},
      {fr:{q:"Tu te d√©cris comme :",a:[
        ["Discret.","Omen"],["M√©thodique.","Brimstone"],["Intransigeant.","Viper"],["Calculateur.","Astra"],["Protecteur.","Harbor"],["Combatif.","Clove"]
      ]},en:{q:"You describe yourself as:",a:[
        ["Quiet.","Omen"],["Methodical.","Brimstone"],["Uncompromising.","Viper"],["Calculating.","Astra"],["Protective.","Harbor"],["Fighty.","Clove"]
      ]}},
      {fr:{q:"Si tu r√©sumes ton impact :",a:[
        ["Timings & mindgames.","Omen"],["Ex√©cutions propres.","Brimstone"],["Contr√¥le long.","Viper"],["Macro / contr√¥le global.","Astra"],["Protection & couloirs s√ªrs.","Harbor"],["Re-fight & tempo.","Clove"]
      ]},en:{q:"If you summarize your impact:",a:[
        ["Timings & mindgames.","Omen"],["Clean executes.","Brimstone"],["Long control.","Viper"],["Macro / global control.","Astra"],["Protection & safe lanes.","Harbor"],["Re-fight & tempo.","Clove"]
      ]}}
    ],

    sentinel: [
      {fr:{q:"Quand tu d√©fends, tu pr√©f√®res :",a:[
        ["Une d√©fense ‚Äòautomatique‚Äô et structur√©e.","Killjoy"],["Observer et pi√©ger l‚Äôinfo.","Cypher"],["Prot√©ger et stabiliser l‚Äô√©quipe.","Sage"],["Punir par la pr√©cision.","Chamber"],["Bloquer et verrouiller une zone.","Deadlock"]
      ]},en:{q:"When defending, you prefer:",a:[
        ["An automated structured defense.","Killjoy"],["Observe and trap info.","Cypher"],["Protect and stabilize the team.","Sage"],["Punish with precision.","Chamber"],["Block and lock an area.","Deadlock"]
      ]}},
      {fr:{q:"En attaque, ton r√¥le naturel :",a:[
        ["S√©curiser le flank avec rigueur.","Killjoy"],["Garder l‚Äôinfo et contr√¥ler les rotations.","Cypher"],["Assurer la survie du groupe.","Sage"],["Chercher un pick propre.","Chamber"],["S√©curiser une zone cl√© et emp√™cher les retakes.","Deadlock"]
      ]},en:{q:"On attack, your natural job:",a:[
        ["Secure flank with rigor.","Killjoy"],["Hold info and control rotations.","Cypher"],["Keep the group alive.","Sage"],["Look for a clean pick.","Chamber"],["Secure key space and stop retakes.","Deadlock"]
      ]}},
      {fr:{q:"Ce qui te fait le plus plaisir :",a:[
        ["Un setup qui gagne tout seul.","Killjoy"],["Un round gagn√© par la lecture.","Cypher"],["Sauver un round pour l‚Äô√©quipe.","Sage"],["Un duel clean qui fait basculer.","Chamber"],["Un ennemi compl√®tement stopp√©.","Deadlock"]
      ]},en:{q:"What you enjoy most:",a:[
        ["A setup that wins by itself.","Killjoy"],["Winning through reading them.","Cypher"],["Saving a round for the team.","Sage"],["A clean duel that flips the round.","Chamber"],["An enemy fully stopped.","Deadlock"]
      ]}},
      {fr:{q:"En retake, tu pr√©f√®res :",a:[
        ["R√©cup√©rer une zone avec m√©thode.","Killjoy"],["Avoir l‚Äôinfo avant d‚Äôavancer.","Cypher"],["Aider l‚Äô√©quipe √† survivre et progresser.","Sage"],["Prendre un pick puis reculer.","Chamber"],["Fermer un passage pour r√©duire les options.","Deadlock"]
      ]},en:{q:"On retake, you prefer:",a:[
        ["Reclaim space methodically.","Killjoy"],["Get info before moving.","Cypher"],["Help the team survive and progress.","Sage"],["Take a pick then fall back.","Chamber"],["Close a path to reduce options.","Deadlock"]
      ]}},
      {fr:{q:"Quand √ßa devient chaotique, tu :",a:[
        ["Reviens √† un plan structur√©.","Killjoy"],["Cherches l‚Äôinfo pour remettre de l‚Äôordre.","Cypher"],["Ralentis pour stabiliser.","Sage"],["Profites du chaos pour punir.","Chamber"],["Bloques pour stopper la vague.","Deadlock"]
      ]},en:{q:"When it gets chaotic, you:",a:[
        ["Return to a structured plan.","Killjoy"],["Look for info to restore order.","Cypher"],["Slow it down to stabilize.","Sage"],["Use the chaos to punish.","Chamber"],["Block to stop the wave.","Deadlock"]
      ]}},
      {fr:{q:"Ton style mental :",a:[
        ["Ing√©nieur.","Killjoy"],["Analyste.","Cypher"],["Gardien.","Sage"],["Tireur.","Chamber"],["Mur.","Deadlock"]
      ]},en:{q:"Your mental style:",a:[
        ["Engineer.","Killjoy"],["Analyst.","Cypher"],["Guardian.","Sage"],["Sharpshooter.","Chamber"],["Wall.","Deadlock"]
      ]}},
      {fr:{q:"Ton d√©faut le plus probable :",a:[
        ["Trop attach√© au plan.","Killjoy"],["Trop dans l‚Äôobservation.","Cypher"],["Trop dans l‚Äôaide, pas assez d‚Äôinitiative.","Sage"],["Trop individualiste.","Chamber"],["Trop rigide.","Deadlock"]
      ]},en:{q:"Your most likely flaw:",a:[
        ["Too attached to the plan.","Killjoy"],["Too much observation.","Cypher"],["Too supportive, not enough initiative.","Sage"],["Too individualistic.","Chamber"],["Too rigid.","Deadlock"]
      ]}},
      {fr:{q:"Tu te sens fort quand :",a:[
        ["Tout est sous contr√¥le.","Killjoy"],["Tu sais o√π ils sont / vont aller.","Cypher"],["Ton √©quipe tient gr√¢ce √† toi.","Sage"],["Tu imposes le respect sur les angles.","Chamber"],["Tu fermes les options.","Deadlock"]
      ]},en:{q:"You feel strong when:",a:[
        ["Everything is under control.","Killjoy"],["You know where they are / will go.","Cypher"],["Your team holds because of you.","Sage"],["You command respect on angles.","Chamber"],["You close options.","Deadlock"]
      ]}},
      {fr:{q:"Ton style de victoire :",a:[
        ["Setup.","Killjoy"],["Info.","Cypher"],["Soutien.","Sage"],["Pick.","Chamber"],["Verrouillage.","Deadlock"]
      ]},en:{q:"Your win style:",a:[
        ["Setup.","Killjoy"],["Info.","Cypher"],["Support.","Sage"],["Pick.","Chamber"],["Lockdown.","Deadlock"]
      ]}},
      {fr:{q:"Si tu r√©sumes ton r√¥le en un mot :",a:[
        ["Contr√¥le.","Killjoy"],["Surveillance.","Cypher"],["Protection.","Sage"],["Punition.","Chamber"],["Blocage.","Deadlock"]
      ]},en:{q:"If you summarize your role in one word:",a:[
        ["Control.","Killjoy"],["Surveillance.","Cypher"],["Protection.","Sage"],["Punishment.","Chamber"],["Blockage.","Deadlock"]
      ]}}
    ]
  };

  // -------------------------
  // Tiebreak: traits (agents cach√©s)
  // -------------------------
  const AGENT_TRAITS = {
    fr: {
      "Jett":"Je gagne souvent en changeant d‚Äôangle et en restant difficile √† lire.",
      "Raze":"Je gagne souvent en cr√©ant une pression forte qui d√©sorganise l‚Äôadversaire.",
      "Reyna":"Je gagne souvent en punissant les erreurs et en prenant l‚Äôascendant mental.",
      "Phoenix":"Je gagne souvent en revenant dans le round m√™me apr√®s un mauvais d√©part.",
      "Yoru":"Je gagne souvent en cassant les attentes et en jouant l‚Äôimpr√©vu.",
      "Neon":"Je gagne souvent en imposant un rythme trop dur √† suivre.",
      "Iso":"Je gagne souvent en jouant les duels de fa√ßon directe et disciplin√©e.",

      "Sova":"Je gagne souvent quand l‚Äô√©quipe agit sur une info claire et fiable.",
      "Skye":"Je gagne souvent en accompagnant l‚Äôaction et en donnant confiance au contact.",
      "Fade":"Je gagne souvent en mettant une pression mentale qui fait craquer.",
      "Breach":"Je gagne souvent en cr√©ant un moment ‚ÄòGO‚Äô tr√®s net pour l‚Äô√©quipe.",
      "KAY/O":"Je gagne souvent en r√©duisant les options adverses et en simplifiant le round.",
      "Gekko":"Je gagne souvent en ayant des solutions simples et flexibles dans le chaos.",

      "Omen":"Je gagne souvent en jouant les timings et le doute.",
      "Brimstone":"Je gagne souvent avec un plan simple, propre, et ex√©cutable.",
      "Viper":"Je gagne souvent en rendant une zone invivable sur la dur√©e.",
      "Astra":"Je gagne souvent en coordonnant le round comme un puzzle.",
      "Harbor":"Je gagne souvent en s√©curisant une trajectoire pour avancer.",
      "Clove":"Je gagne souvent en re-fight et en relan√ßant le tempo.",

      "Killjoy":"Je gagne souvent avec une d√©fense structur√©e qui tient toute seule.",
      "Cypher":"Je gagne souvent en lisant la map et en contr√¥lant l‚Äôinfo.",
      "Sage":"Je gagne souvent en stabilisant l‚Äô√©quipe quand √ßa part mal.",
      "Chamber":"Je gagne souvent en prenant un pick propre qui fait basculer.",
      "Deadlock":"Je gagne souvent en fermant les options et en stoppant net."
    },
    en: {
      "Jett":"I often win by changing angles and staying hard to read.",
      "Raze":"I often win by creating heavy pressure that breaks enemy structure.",
      "Reyna":"I often win by punishing mistakes and taking mental control.",
      "Phoenix":"I often win by coming back into the round even after a bad start.",
      "Yoru":"I often win by breaking expectations and playing the unexpected.",
      "Neon":"I often win by imposing a pace that‚Äôs hard to follow.",
      "Iso":"I often win by taking direct, disciplined duels.",

      "Sova":"I often win when the team acts on clear, reliable info.",
      "Skye":"I often win by supporting the action and boosting confidence at contact.",
      "Fade":"I often win by applying mental pressure that makes people crack.",
      "Breach":"I often win by creating a very clear 'GO' moment for the team.",
      "KAY/O":"I often win by reducing enemy options and simplifying the round.",
      "Gekko":"I often win by having simple, flexible solutions in chaos.",

      "Omen":"I often win through timing and doubt.",
      "Brimstone":"I often win with a simple, clean, executable plan.",
      "Viper":"I often win by making an area unplayable over time.",
      "Astra":"I often win by coordinating the round like a puzzle.",
      "Harbor":"I often win by securing a safe path forward.",
      "Clove":"I often win by re-fighting and restarting momentum.",

      "Killjoy":"I often win with a structured defense that holds on its own.",
      "Cypher":"I often win by reading the map and controlling info.",
      "Sage":"I often win by stabilizing the team when things go bad.",
      "Chamber":"I often win by taking a clean pick that flips the round.",
      "Deadlock":"I often win by closing options and hard-stopping pushes."
    }
  };

  // -------------------------
  // Tiebreak: traits (roles cach√©s)
  // -------------------------
  const ROLE_TRAITS = {
    fr: {
      duelist:"Je pr√©f√®re avoir un impact direct et prendre les duels.",
      initiator:"Je pr√©f√®re pr√©parer l‚Äôaction et cr√©er des ouvertures.",
      controller:"Je pr√©f√®re contr√¥ler le rythme et structurer le round.",
      sentinel:"Je pr√©f√®re s√©curiser, tenir et stabiliser l‚Äô√©quipe."
    },
    en: {
      duelist:"I prefer direct impact and taking duels.",
      initiator:"I prefer setting up action and creating openings.",
      controller:"I prefer controlling tempo and structuring the round.",
      sentinel:"I prefer securing, holding, and stabilizing the team."
    }
  };

  // -------------------------
  // UI refs
  // -------------------------
  const introCard = $("introCard");
  const quizCard = $("quizCard");
  const tiebreakCard = $("tiebreakCard");
  const resultCard = $("resultCard");

  const langSel = $("langSel");
  const startBtn = $("startBtn");
  const restartBtn = $("restartBtn");
  const backBtn = $("backBtn");

  const qText = $("qText");
  const answersEl = $("answers");
  const progressEl = $("progress");
  const phaseHint = $("phaseHint");

  const tbTitle = $("tbTitle");
  const tbBadge = $("tbBadge");
  const tbText = $("tbText");
  const tbAnswers = $("tbAnswers");
  const tbHint = $("tbHint");

  const mainAgent = $("mainAgent");
  const mainExplain = $("mainExplain");
  const alt1Agent = $("alt1Agent");
  const alt2Agent = $("alt2Agent");
  const alt1Why = $("alt1Why");
  const alt2Why = $("alt2Why");
  const scoreLines = $("scoreLines");

  const retryBtn = $("retryBtn");
  const copyBtn = $("copyBtn");

  const langLabel = $("langLabel");
  const title = $("title");
  const subtitle = $("subtitle");
  const pill1 = $("pill1");
  const pill2 = $("pill2");
  const pill3 = $("pill3");
  const disclaimer = $("disclaimer");
  const pillMain = $("pillMain");
  const pillAlt = $("pillAlt");
  const alt1Title = $("alt1Title");
  const alt2Title = $("alt2Title");
  const scoreTitle = $("scoreTitle");
  const noteMeta = $("noteMeta");
  const subbrand = $("subbrand");
  const footerTitle = $("footerTitle");
  const footerSubtitle = $("footerSubtitle");

  // -------------------------
  // State
  // -------------------------
  let lang = "fr";
  let phase = "role"; // "role" | "agent"
  let idx = 0;
  let history = [];

  let roleScores = initScoreMap(["duelist","initiator","controller","sentinel"]);
  let chosenRole = null;

  let agentScores = {};
  let chosenAgents = [];

  // random order state
  let roleOrder = [];
  let agentOrder = [];
  let renderedAnswers = {}; // key: "phase:idx" -> shuffled answers array

  // tie state for:
  // - role selection (after 10 role questions)
  // - top3 agent picks (after 10 agent questions)
  let pickStage = 0;        // 0->pick #1, 1->#2, 2->#3
  let lockedWinners = [];   // already selected agents
  let pendingTie = null;    // { type, candidates, nextRound, currentPool }

  // -------------------------
  // Language setup
  // -------------------------
  function setLanguage(newLang){
    lang = newLang;
    document.documentElement.lang = lang;

    langLabel.textContent = LABELS[lang].language;
    restartBtn.textContent = LABELS[lang].restart;
    startBtn.textContent = LABELS[lang].start;
    backBtn.textContent = LABELS[lang].back;

    subbrand.textContent = "Agent Selector ‚Ä¢ Valorant";

    title.textContent = LABELS[lang].introTitle;
    subtitle.textContent = LABELS[lang].introSub;

    pill1.textContent = "10 + 10 questions";
    pill2.textContent = (lang==="fr") ? "R√¥le ‚Üí Agent" : "Role ‚Üí Agent";
    pill3.textContent = (lang==="fr") ? "D√©partage si √©galit√©" : "Tiebreak if tied";

    disclaimer.textContent = (lang==="fr")
      ? "Note : ce quiz donne une recommandation bas√©e sur ton style. Mets √† jour la liste d‚Äôagents si Riot en ajoute."
      : "Note: this quiz recommends based on your playstyle. Update the agent list if Riot adds new agents.";

    tbTitle.textContent = LABELS[lang].tiebreakTitle;
    tbBadge.textContent = LABELS[lang].tiebreakBadge;
    tbHint.textContent = LABELS[lang].tiebreakHint;

    pillMain.textContent = (lang==="fr") ? "Agent principal" : "Main agent";
    pillAlt.textContent  = (lang==="fr") ? "Alternatives" : "Alternatives";
    alt1Title.textContent = LABELS[lang].alt1;
    alt2Title.textContent = LABELS[lang].alt2;
    scoreTitle.textContent = LABELS[lang].scores;

    retryBtn.textContent = LABELS[lang].retake;
    copyBtn.textContent = LABELS[lang].copy;
    noteMeta.textContent = LABELS[lang].note;

    footerTitle.textContent = LABELS[lang].socialsTitle;
    footerSubtitle.textContent = LABELS[lang].socialsSub;

    if(quizCard.style.display !== "none") renderQuestion();

    if(tiebreakCard.style.display !== "none" && pendingTie){
      if(!pendingTie.currentPool || pendingTie.currentPool.length === 0){
        prepareNextPool();
      } else {
        renderTiebreakPool();
      }
    }

    if(resultCard.style.display !== "none") renderAgentScores();
  }

  // -------------------------
  // Navigation
  // -------------------------
  function showOnly(which){
    introCard.style.display = (which==="intro") ? "" : "none";
    quizCard.style.display  = (which==="quiz") ? "" : "none";
    tiebreakCard.style.display = (which==="tiebreak") ? "" : "none";
    resultCard.style.display = (which==="result") ? "" : "none";
  }

  function start(){
    phase = "role";
    idx = 0;
    history = [];
    chosenRole = null;

    roleScores = initScoreMap(["duelist","initiator","controller","sentinel"]);
    agentScores = {};
    chosenAgents = [];

    pickStage = 0;
    lockedWinners = [];
    pendingTie = null;

    // randomize question order each run
    roleOrder = shuffleArray([...Array(ROLE_QUESTIONS.length).keys()]);
    agentOrder = [];
    renderedAnswers = {};

    showOnly("quiz");
    renderQuestion();
  }

  function currentQuestionSet(){
    if(phase === "role") return ROLE_QUESTIONS;
    return Q_AGENT[chosenRole] || [];
  }

  function currentOrder(){
    return (phase === "role") ? roleOrder : agentOrder;
  }

  function currentQuestionIndex(){
    const order = currentOrder();
    return order[idx];
  }

  function renderQuestion(){
    const qs = currentQuestionSet();
    const order = currentOrder();

    if(!order || order.length !== qs.length){
      if(phase === "role"){
        roleOrder = shuffleArray([...Array(qs.length).keys()]);
      } else {
        agentOrder = shuffleArray([...Array(qs.length).keys()]);
      }
    }

    const realIndex = currentQuestionIndex();
    const q = qs[realIndex]?.[lang];

    if(!q){
      alert(lang==="fr"
        ? "Erreur: questions manquantes pour cette phase."
        : "Error: missing questions for this phase.");
      showOnly("intro");
      return;
    }

    const total = qs.length;
    phaseHint.textContent = (phase === "role") ? LABELS[lang].phaseRole : LABELS[lang].phaseAgent;

    progressEl.textContent = (phase === "role")
      ? (lang==="fr" ? `R√¥le ‚Ä¢ Question ${idx+1} / ${total}` : `Role ‚Ä¢ Question ${idx+1} / ${total}`)
      : (lang==="fr" ? `Agent ‚Ä¢ Question ${idx+1} / ${total}` : `Agent ‚Ä¢ Question ${idx+1} / ${total}`);

    qText.textContent = q.q;
    answersEl.innerHTML = "";

    // shuffle answers per question, but keep stable when going back
    const stableKey = `${phase}:${idx}`;
    let answers = q.a;

    if(renderedAnswers[stableKey]){
      answers = renderedAnswers[stableKey];
    } else {
      answers = shuffleArray(q.a);
      renderedAnswers[stableKey] = answers;
    }

    answers.forEach(([label, awardKey]) => {
      const btn = document.createElement("button");
      btn.className = "ans";
      btn.type = "button";
      btn.textContent = label;
      btn.addEventListener("click", () => chooseAnswer(awardKey));
      answersEl.appendChild(btn);
    });

    backBtn.style.display = (idx>0) ? "" : "none";
  }

  function chooseAnswer(awardKey){
    history.push({ phase, qIndex: idx, realIndex: currentQuestionIndex(), awardedKey: awardKey });

    if(phase === "role"){
      roleScores[awardKey]++;

      idx++;
      if(idx < ROLE_QUESTIONS.length){
        renderQuestion();
      } else {
        // ---- ROLE decision with tiebreak if needed ----
        const entries = Object.entries(roleScores).map(([k,v])=>({k,v}));
        const max = Math.max(...entries.map(e => e.v));
        const tied = entries.filter(e => e.v === max).map(e => e.k);

        if(tied.length === 1){
          chosenRole = tied[0];
          startAgentPhase();
        } else {
          startTiebreak("role", tied);
        }
      }
    } else {
      agentScores[awardKey]++;

      idx++;
      const qs = Q_AGENT[chosenRole] || [];
      if(idx < qs.length){
        renderQuestion();
      } else {
        resolveTop3AgentsWithTies();
      }
    }
  }

  function goBack(){
    if(idx<=0) return;
    idx--;

    const last = history.pop();
    if(!last) return;

    if(last.phase === "role"){
      roleScores[last.awardedKey] = clamp0(roleScores[last.awardedKey]-1);
      phase = "role";
      chosenRole = null;
    } else {
      agentScores[last.awardedKey] = clamp0(agentScores[last.awardedKey]-1);
      phase = "agent";
    }

    renderQuestion();
  }

  function startAgentPhase(){
    phase = "agent";
    idx = 0;

    agentScores = initScoreMap(AGENTS_BY_ROLE[chosenRole]);

    const agentQs = Q_AGENT[chosenRole] || [];
    agentOrder = shuffleArray([...Array(agentQs.length).keys()]);
    renderedAnswers = {}; // reset answer shuffle cache for agent phase

    showOnly("quiz");
    renderQuestion();
  }

  // -------------------------
  // Top-3 agent picking with optimized tiebreak
  // -------------------------
  function resolveTop3AgentsWithTies(){
    pickStage = 0;
    lockedWinners = [];
    pendingTie = null;
    continuePicking();
  }

  function continuePicking(){
    if(pickStage >= 3){
      chosenAgents = lockedWinners.slice(0,3);
      finalizeResultsUI();
      return;
    }

    const remaining = Object.keys(agentScores).filter(a => !lockedWinners.includes(a));
    if(remaining.length === 0){
      finalizeResultsUI();
      return;
    }

    let max = -Infinity;
    remaining.forEach(a => { max = Math.max(max, agentScores[a]); });
    const tied = remaining.filter(a => agentScores[a] === max);

    if(tied.length === 1){
      lockedWinners.push(tied[0]);
      pickStage++;
      continuePicking();
      return;
    }

    // tie => optimized pools tiebreak (agents)
    startTiebreak("agent", tied);
  }

  // -------------------------
  // Generic tiebreak (roles OR agents) with pools-of-4
  // -------------------------
  function startTiebreak(type, tiedKeys){
    pendingTie = {
      type, // "role" | "agent"
      traits: (type === "role") ? ROLE_TRAITS : AGENT_TRAITS,
      candidates: shuffleArray(tiedKeys.slice()), // shuffle to avoid patterns
      nextRound: [],
      currentPool: []
    };
    showOnly("tiebreak");
    prepareNextPool();
  }

  function prepareNextPool(){
    if(!pendingTie) return;

    // End of a round of pools => if one winner remains, we‚Äôre done
    if(pendingTie.candidates.length === 0){
      if(pendingTie.nextRound.length === 1){
        const winner = pendingTie.nextRound[0];
        const type = pendingTie.type;
        pendingTie = null;

        if(type === "role"){
          chosenRole = winner;
          startAgentPhase();
          return;
        }

        // agent
        lockedWinners.push(winner);
        pickStage++;
        showOnly("quiz");
        continuePicking();
        return;
      }

      // New round with pool winners
      pendingTie.candidates = shuffleArray(pendingTie.nextRound.slice());
      pendingTie.nextRound = [];
    }

    // Take next pool of 2 to 4
    pendingTie.currentPool = pendingTie.candidates.splice(0, 4);

    // Safety: if we somehow got 1 candidate, auto-advance
    if(pendingTie.currentPool.length === 1){
      pendingTie.nextRound.push(pendingTie.currentPool[0]);
      pendingTie.currentPool = [];
      prepareNextPool();
      return;
    }

    renderTiebreakPool();
  }

  function renderTiebreakPool(){
    tbTitle.textContent = LABELS[lang].tiebreakTitle;
    tbBadge.textContent = LABELS[lang].tiebreakBadge;
    tbHint.textContent = LABELS[lang].tiebreakHint;

    tbText.textContent = (lang==="fr")
      ? "Laquelle te ressemble le plus ?"
      : "Which one fits you best?";

    tbAnswers.innerHTML = "";

    // Shuffle display order of options too (anti-pattern)
    const pool = shuffleArray(pendingTie.currentPool);

    pool.forEach(key => {
      const trait = pendingTie.traits?.[lang]?.[key];
      if(!trait){
        alert(lang==="fr"
          ? "Erreur: traits manquants (tiebreak)."
          : "Error: missing traits (tiebreak).");
        showOnly("intro");
        return;
      }

      const btn = document.createElement("button");
      btn.className = "ans";
      btn.type = "button";
      btn.textContent = trait;
      btn.addEventListener("click", () => chooseTiebreakWinner(key));
      tbAnswers.appendChild(btn);
    });
  }

  function chooseTiebreakWinner(winner){
    // Break tie by giving +1 to chosen (still hidden)
    if(pendingTie.type === "role"){
      roleScores[winner] = (roleScores[winner] || 0) + 1;
    } else {
      agentScores[winner] = (agentScores[winner] || 0) + 1;
    }

    // Winner advances to next round
    pendingTie.nextRound.push(winner);
    pendingTie.currentPool = [];

    // Next pool / round
    prepareNextPool();
  }

  // -------------------------
  // Final results
  // -------------------------
  function finalizeResultsUI(){
    const ordered = sortedKeys(agentScores).filter(a => !lockedWinners.includes(a));
    while(lockedWinners.length < 3 && ordered.length) lockedWinners.push(ordered.shift());
    chosenAgents = lockedWinners.slice(0,3);

    const [main, alt1, alt2] = chosenAgents;

    mainAgent.textContent = main || "‚Äî";
    alt1Agent.textContent = alt1 || "‚Äî";
    alt2Agent.textContent = alt2 || "‚Äî";

    const roleExplain = LABELS[lang].roleExplain[chosenRole] || "";
    mainExplain.textContent = (lang==="fr")
      ? `R√¥le d√©tect√© : ${chosenRole.toUpperCase()} ‚Äî ${roleExplain}`
      : `Detected role: ${chosenRole.toUpperCase()} ‚Äî ${roleExplain}`;

    alt1Why.textContent = (lang==="fr")
      ? `Alternative coh√©rente dans ${chosenRole.toUpperCase()} (2e meilleur score).`
      : `Coherent alternative within ${chosenRole.toUpperCase()} (2nd best score).`;

    alt2Why.textContent = (lang==="fr")
      ? `Alternative coh√©rente dans ${chosenRole.toUpperCase()} (3e meilleur score).`
      : `Coherent alternative within ${chosenRole.toUpperCase()} (3rd best score).`;

    renderAgentScores();
    showOnly("result");
  }

  function renderAgentScores(){
    scoreTitle.textContent = LABELS[lang].scores;
    scoreLines.innerHTML = "";

    const ordered = Object.entries(agentScores)
      .map(([k,v])=>({k,v}))
      .sort((a,b)=> b.v - a.v || a.k.localeCompare(b.k));

    ordered.forEach(({k,v}) => {
      const line = document.createElement("div");
      line.className = "scoreLine";
      const left = document.createElement("div");
      left.innerHTML = `<b>${k}</b>`;
      const right = document.createElement("div");
      right.textContent = String(v);
      line.appendChild(left);
      line.appendChild(right);
      scoreLines.appendChild(line);
    });
  }

  async function copyResult(){
    const txt = (lang==="fr")
      ? `R√©sultat Falka:\n- R√¥le: ${chosenRole}\n- Agent: ${mainAgent.textContent}\n- Alternatives: ${alt1Agent.textContent}, ${alt2Agent.textContent}`
      : `Falka result:\n- Role: ${chosenRole}\n- Agent: ${mainAgent.textContent}\n- Alternatives: ${alt1Agent.textContent}, ${alt2Agent.textContent}`;

    try{
      await navigator.clipboard.writeText(txt);
      copyBtn.textContent = LABELS[lang].copied;
      setTimeout(()=> copyBtn.textContent = LABELS[lang].copy, 1200);
    } catch(e){
      alert((lang==="fr") ? "Copie impossible (navigateur)." : "Copy failed (browser).");
    }
  }

  // -------------------------
  // Events
  // -------------------------
  langSel.addEventListener("change", (e) => setLanguage(e.target.value));
  startBtn.addEventListener("click", start);
  restartBtn.addEventListener("click", () => showOnly("intro"));
  backBtn.addEventListener("click", goBack);
  retryBtn.addEventListener("click", start);
  copyBtn.addEventListener("click", copyResult);

  // Init
  setLanguage(langSel.value);
})();
</script>
</body>
</html>
