<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Falka â€¢ Valorant Agent Selector (FR/EN)</title>

  <!-- Police "style Valorant" (proche) pour les titres -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">

  <style>
    :root{
      color-scheme: dark;
      --bg:#0b0f1a;
      --panel:#0f1526;
      --panel2:#141b2e;
      --text:#e9eefc;

      /* InspirÃ© du logo Falka (rouge + crÃ¨me) */
      --f-red:#e5393b;
      --f-cream:#e6d2ad;

      --stroke: rgba(255,255,255,.10);
      --stroke2: rgba(255,255,255,.14);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 500px at 20% 0%, rgba(229,57,59,.20), transparent 60%),
        radial-gradient(700px 420px at 80% 15%, rgba(230,210,173,.12), transparent 55%),
        var(--bg);
      color:var(--text);
    }

    header{
      padding:14px 16px;
      border-bottom:1px solid var(--stroke);
      position:sticky; top:0; z-index:10;
      background: linear-gradient(180deg, rgba(11,15,26,.92), rgba(11,15,26,.86));
      backdrop-filter: blur(8px);
    }

    .headerWrap{
      max-width:980px;
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:260px;
    }

    /* Mets le fichier logo Ã  cÃ´tÃ© de ce HTML sous le nom: falka-logo.png */
    .logo{
      width:42px; height:42px;
      border-radius:14px;
      border:1px solid var(--stroke2);
      background:#000;
      object-fit:cover;
    }

    .brandText{
      display:flex;
      flex-direction:column;
      line-height:1;
    }

    .pseudo{
      font-family: "Bebas Neue", system-ui, sans-serif;
      letter-spacing:.10em;
      font-size:26px;
      color:var(--text);
    }
    .subbrand{
      margin-top:4px;
      font-size:12px;
      color:rgba(233,238,252,.72);
    }

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    label.muted{ color: rgba(233,238,252,.70); font-size:13px; }

    select, button{
      background: var(--panel2);
      color: var(--text);
      border: 1px solid var(--stroke2);
      border-radius: 12px;
      padding: 10px 12px;
      cursor: pointer;
    }

    button.primary{
      background: linear-gradient(135deg, rgba(229,57,59,.95), rgba(229,57,59,.78));
      border-color: rgba(255,255,255,.14);
      box-shadow: 0 12px 34px rgba(229,57,59,.18);
    }
    button.ghost{ background: transparent; }

    main{
      max-width:980px;
      margin:0 auto;
      padding:18px 16px 18px;
    }

    .card{
      background: linear-gradient(180deg, rgba(15,21,38,.92), rgba(15,21,38,.86));
      border:1px solid var(--stroke);
      border-radius:18px;
      padding:16px;
      margin:14px 0;
      box-shadow: 0 10px 34px rgba(0,0,0,.28);
    }

    .title{
      font-family: "Bebas Neue", system-ui, sans-serif;
      letter-spacing:.08em;
      font-size:44px;
      margin:10px 0 6px;
    }

    .muted{ color: rgba(233,238,252,.74); }

    .row{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; }

    .pill{
      padding:7px 11px;
      border-radius:999px;
      border:1px solid var(--stroke2);
      background: rgba(20,27,46,.72);
      font-size:13px;
    }
    .pill.red{ border-color: rgba(229,57,59,.55); box-shadow: inset 0 0 0 1px rgba(229,57,59,.10); }
    .pill.cream{ border-color: rgba(230,210,173,.45); box-shadow: inset 0 0 0 1px rgba(230,210,173,.08); }

    .qtitle{
      font-size:18px;
      font-weight:800;
      margin:6px 0 10px;
    }

    .answers{ display:grid; gap:10px; }

    /* RÃ©ponses en police classique */
    .ans{
      text-align:left;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--stroke2);
      background: rgba(20,27,46,.95);
      transition: transform .05s ease, border-color .12s ease, box-shadow .12s ease;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .ans:hover{
      transform: translateY(-1px);
      border-color: rgba(230,210,173,.28);
      box-shadow: 0 10px 26px rgba(0,0,0,.20);
    }

    .footerBtns{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; }

    .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    @media (max-width:720px){ .grid2{ grid-template-columns:1fr; } }

    .resultBig{
      font-family: "Bebas Neue", system-ui, sans-serif;
      letter-spacing:.08em;
      font-size:40px;
      margin:10px 0 0;
    }

    .scoreWrap{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .scoreLine{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:14px;
      background: rgba(20,27,46,.95);
      border:1px solid var(--stroke);
      width:min(420px,100%);
    }
    .scoreLine b{ font-weight:900; }

    footer{
      max-width:980px;
      margin:0 auto;
      padding:0 16px 34px;
    }
    .footerCard{
      background: linear-gradient(180deg, rgba(15,21,38,.92), rgba(15,21,38,.80));
      border:1px solid var(--stroke);
      border-radius:18px;
      padding:16px;
      box-shadow: 0 10px 34px rgba(0,0,0,.22);
    }
    .footerTitle{
      font-family:"Bebas Neue", system-ui, sans-serif;
      letter-spacing:.08em;
      font-size:26px;
      margin:0 0 8px;
    }
    .socialList{ display:grid; gap:10px; margin-top:10px; }
    .socialItem{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--stroke);
      background: rgba(20,27,46,.75);
    }
    .socialLeft{ display:flex; align-items:center; gap:10px; }
    .badge{
      width:10px; height:10px; border-radius:999px;
      background: var(--f-red);
      box-shadow: 0 0 0 4px rgba(229,57,59,.10);
    }
    .socialName{ font-weight:800; }
    .socialLink a{
      color: var(--f-cream);
      text-decoration:none;
      font-weight:800;
    }
    .socialLink a:hover{ text-decoration:underline; }
  </style>
</head>

<body>
  <header>
    <div class="headerWrap">
      <div class="brand">
        <!-- Mets le logo fourni dans le mÃªme dossier que ce fichier HTML sous le nom "falka-logo.png" -->
        <img class="logo" src="falka-logo.png" alt="Logo Falka" />
        <div class="brandText">
          <div class="pseudo">FALKA</div>
          <div class="subbrand" id="subbrand">Agent Selector â€¢ Valorant</div>
        </div>
      </div>

      <div class="controls">
        <label class="muted" for="langSel" id="langLabel">Langue</label>
        <select id="langSel" aria-label="Language">
          <option value="fr">ðŸ‡«ðŸ‡· FranÃ§ais</option>
          <option value="en">ðŸ‡¬ðŸ‡§ English</option>
        </select>
        <button class="ghost" id="restartBtn">Recommencer</button>
      </div>
    </div>
  </header>

  <main>
    <div class="card" id="introCard">
      <div class="row">
        <span class="pill red" id="pill1">10 + 10 questions</span>
        <span class="pill cream" id="pill2">RÃ´le â†’ Agent</span>
        <span class="pill" id="pill3">DÃ©partage si Ã©galitÃ©</span>
      </div>

      <div class="title" id="title">Quel agent Valorant te correspond ?</div>
      <p class="muted" id="subtitle" style="margin:0;">
        10 questions pour trouver ton rÃ´le, puis 10 questions pour trouver ton agent dans ce rÃ´le.
      </p>

      <div class="footerBtns">
        <button class="primary" id="startBtn">Commencer</button>
      </div>

      <p class="muted" id="disclaimer" style="margin-top:10px; font-size:13px;">
        Note : ce quiz donne une recommandation basÃ©e sur ton style. Mets Ã  jour la liste dâ€™agents si Riot en ajoute.
      </p>
    </div>

    <div class="card" id="quizCard" style="display:none;">
      <div class="row" style="justify-content:space-between; align-items:center;">
        <div class="muted" id="progress">Question 1 / 10</div>
        <span class="pill" id="phaseHint">Phase : RÃ´le</span>
      </div>

      <div class="qtitle" id="qText">...</div>
      <div class="answers" id="answers"></div>

      <div class="footerBtns">
        <button id="backBtn">Retour</button>
      </div>
    </div>

    <div class="card" id="tiebreakCard" style="display:none;">
      <div class="row" style="justify-content:space-between; align-items:center;">
        <div class="muted" id="tbTitle">Question bonus (dÃ©partage)</div>
        <span class="pill red" id="tbPair">â€”</span>
      </div>

      <div class="qtitle" id="tbText">...</div>
      <div class="answers" id="tbAnswers"></div>
    </div>

    <div class="card" id="resultCard" style="display:none;">
      <div class="row">
        <span class="pill red" id="pillMain">Agent principal</span>
        <span class="pill cream" id="pillAlt">Alternatives</span>
      </div>

      <div class="resultBig" id="mainAgent">â€”</div>
      <p class="muted" id="mainExplain" style="margin-top:0;">â€”</p>

      <div class="grid2" style="margin-top:12px;">
        <div class="card" style="margin:0;">
          <b id="alt1Title">Alternative #1</b>
          <div style="margin-top:8px; font-size:22px; font-weight:900;" id="alt1Agent">â€”</div>
          <div class="muted" id="alt1Why" style="margin-top:6px;">â€”</div>
        </div>
        <div class="card" style="margin:0;">
          <b id="alt2Title">Alternative #2</b>
          <div style="margin-top:8px; font-size:22px; font-weight:900;" id="alt2Agent">â€”</div>
          <div class="muted" id="alt2Why" style="margin-top:6px;">â€”</div>
        </div>
      </div>

      <h3 style="margin:16px 0 8px;" id="scoreTitle">Scores (agents)</h3>
      <div class="scoreWrap" id="scoreLines"></div>

      <div class="footerBtns">
        <button class="primary" id="retryBtn">Refaire le quiz</button>
        <button id="copyBtn">Copier le rÃ©sultat</button>
      </div>

      <p class="muted" id="noteMeta" style="margin-top:10px; font-size:13px;">
        Astuce : rÃ©ponds en pensant Ã  tes derniers matchs, pas Ã  ton humeur du moment.
      </p>
    </div>
  </main>

  <footer>
    <div class="footerCard">
      <div class="footerTitle" id="footerTitle">RÃ©seaux de Falka</div>
      <div class="muted" id="footerSubtitle">Retrouve Falka sur :</div>

      <div class="socialList">
        <div class="socialItem">
          <div class="socialLeft">
            <span class="badge"></span>
            <span class="socialName">Twitch</span>
          </div>
          <div class="socialLink">
            <a href="https://www.twitch.tv/falkalive" target="_blank" rel="noopener">FalkaLive</a>
          </div>
        </div>

        <div class="socialItem">
          <div class="socialLeft">
            <span class="badge"></span>
            <span class="socialName">TikTok</span>
          </div>
          <div class="socialLink">
            <a href="https://www.tiktok.com/@falkalive" target="_blank" rel="noopener">Falka TikTok</a>
          </div>
        </div>
      </div>

      <p class="muted" style="margin:12px 0 0; font-size:12px;">
        Â© Falka â€¢ Fan project â€¢ Valorant est une marque de Riot Games.
      </p>
    </div>
  </footer>

<script>
(() => {
  // -------------------------
  // Helpers
  // -------------------------
  const $ = (id) => document.getElementById(id);
  const clamp0 = (n) => Math.max(0, n);

  function pairKey(a,b){
    const s = [a,b].sort();
    return `${s[0]}|${s[1]}`;
  }

  function initScoreMap(keys){
    const m = {};
    keys.forEach(k => m[k] = 0);
    return m;
  }

  function topKeys(scoreMap){
    const entries = Object.entries(scoreMap).map(([k,v]) => ({k, v}));
    const max = Math.max(...entries.map(e => e.v));
    return entries.filter(e => e.v === max).map(e => e.k);
  }

  function sortedKeys(scoreMap){
    return Object.entries(scoreMap)
      .map(([k,v]) => ({k,v}))
      .sort((a,b)=> b.v - a.v || a.k.localeCompare(b.k))
      .map(e => e.k);
  }

  // -------------------------
  // Language labels
  // -------------------------
  const LABELS = {
    fr: {
      language:"Langue",
      restart:"Recommencer",
      start:"Commencer",
      back:"Retour",
      phaseRole:"Phase : RÃ´le",
      phaseAgent:"Phase : Agent",
      tiebreakTitle:"Question bonus (dÃ©partage)",
      retake:"Refaire le quiz",
      copy:"Copier le rÃ©sultat",
      copied:"CopiÃ© âœ…",
      scores:"Scores (agents)",
      scoresRole:"Scores (rÃ´les)",
      alt1:"Alternative #1",
      alt2:"Alternative #2",
      socialsTitle:"RÃ©seaux de Falka",
      socialsSub:"Retrouve Falka sur :",
      introTitle:"Quel agent Valorant te correspond ?",
      introSub:"10 questions pour trouver ton rÃ´le, puis 10 questions pour trouver ton agent dans ce rÃ´le.",
      note:"Astuce : rÃ©ponds en pensant Ã  tes derniers matchs, pas Ã  ton humeur du moment.",
      roleExplain: {
        duelist: "Profil Duelist : impact direct, duels, prise dâ€™espace.",
        initiator:"Profil Initiator : info + facilitation dâ€™entrÃ©e.",
        controller:"Profil Controller : contrÃ´le des lignes de vue et du tempo.",
        sentinel:"Profil Sentinel : sÃ©curitÃ©, tenue et anti-flank."
      }
    },
    en: {
      language:"Language",
      restart:"Restart",
      start:"Start",
      back:"Back",
      phaseRole:"Phase: Role",
      phaseAgent:"Phase: Agent",
      tiebreakTitle:"Bonus question (tiebreak)",
      retake:"Retake quiz",
      copy:"Copy result",
      copied:"Copied âœ…",
      scores:"Scores (agents)",
      scoresRole:"Scores (roles)",
      alt1:"Alternative #1",
      alt2:"Alternative #2",
      socialsTitle:"Falkaâ€™s socials",
      socialsSub:"Find Falka on:",
      introTitle:"Which Valorant agent fits you?",
      introSub:"10 questions to find your role, then 10 questions to find your agent within that role.",
      note:"Tip: answer thinking about your latest matches, not your current mood.",
      roleExplain: {
        duelist: "Duelist profile: direct impact, duels, space-taking.",
        initiator:"Initiator profile: info + enabling entries.",
        controller:"Controller profile: sightline and tempo control.",
        sentinel:"Sentinel profile: security, holding, anti-flank."
      }
    }
  };

  // -------------------------
  // Phase 1 - ROLE questions
  // (Vous allez remplacer ces 10 questions par vos versions.
  //  Format: {fr:{q, a:[[text, roleKey],...]}, en:{...}}
  //  roleKey: duelist|initiator|controller|sentinel
  // -------------------------
  const ROLE_QUESTIONS = [
    {
      fr:{ q:"Ton style naturel en dÃ©but de round ?", a:[
        ["Jâ€™entre en premier, je prends les duels.","duelist"],
        ["Je prÃ©pare lâ€™entrÃ©e avec mes utilitaires.","initiator"],
        ["Je contrÃ´le la map avec des smokes.","controller"],
        ["Je sÃ©curise les arriÃ¨res et je protÃ¨ge.","sentinel"],
      ]},
      en:{ q:"Your natural style at round start?", a:[
        ["I entry first and take duels.","duelist"],
        ["I prepare the entry with utility.","initiator"],
        ["I control space with smokes.","controller"],
        ["I lock down and protect flanks.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Quelle est ta plus grande force ?", a:[
        ["Mon aim.","duelist"],
        ["Ma communication / crÃ©ation dâ€™ouverture.","initiator"],
        ["Ma vision stratÃ©gique.","controller"],
        ["Mon intelligence de jeu (timings, holds).","sentinel"],
      ]},
      en:{ q:"Whatâ€™s your biggest strength?", a:[
        ["My aim.","duelist"],
        ["My comms / enabling openings.","initiator"],
        ["My strategic vision.","controller"],
        ["My game sense (timings, holds).","sentinel"],
      ]}
    },
    {
      fr:{ q:"Tu prÃ©fÃ¨res gagner grÃ¢ce Ã  :", a:[
        ["Des frags dÃ©cisifs.","duelist"],
        ["Des ouvertures crÃ©Ã©es par lâ€™info/flash.","initiator"],
        ["Le contrÃ´le du tempo et des lignes de vue.","controller"],
        ["Des erreurs adverses punies et une dÃ©fense solide.","sentinel"],
      ]},
      en:{ q:"You prefer winning through:", a:[
        ["Decisive kills.","duelist"],
        ["Openings via info/flash.","initiator"],
        ["Tempo and sightline control.","controller"],
        ["Punishing mistakes with solid defense.","sentinel"],
      ]}
    },
    {
      fr:{ q:"En situation 1vX tu :", a:[
        ["Cherches le duel rapide.","duelist"],
        ["Isoles avec tes capacitÃ©s (flash/reveal).","initiator"],
        ["Joues le timing et la map (smokes).","controller"],
        ["Forces les adversaires Ã  venir dans ton setup.","sentinel"],
      ]},
      en:{ q:"In a 1vX you:", a:[
        ["Take fast duels.","duelist"],
        ["Isolate with utility (flash/reveal).","initiator"],
        ["Play timing and map control (smokes).","controller"],
        ["Force enemies into your setup.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Ton niveau dâ€™agressivitÃ© est plutÃ´t :", a:[
        ["TrÃ¨s agressif.","duelist"],
        ["Agressif mais prÃ©parÃ©.","initiator"],
        ["Calme, je dicte le tempo.","controller"],
        ["Patient, jâ€™attends lâ€™erreur.","sentinel"],
      ]},
      en:{ q:"Your aggression level is:", a:[
        ["Very aggressive.","duelist"],
        ["Aggressive but prepared.","initiator"],
        ["Calm, I dictate tempo.","controller"],
        ["Patient, I wait for mistakes.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Ton rÃ´le prÃ©fÃ©rÃ© dans lâ€™Ã©quipe ?", a:[
        ["Carry / fragger.","duelist"],
        ["Facilitateur (entrÃ©e, info).","initiator"],
        ["Chef dâ€™orchestre (smokes, rotations).","controller"],
        ["Pilier dÃ©fensif (holds, anti-flank).","sentinel"],
      ]},
      en:{ q:"Your preferred team role?", a:[
        ["Carry / fragger.","duelist"],
        ["Facilitator (entry, info).","initiator"],
        ["Orchestrator (smokes, rotations).","controller"],
        ["Defensive anchor (holds, anti-flank).","sentinel"],
      ]}
    },
    {
      fr:{ q:"Tu te sens le plus fort :", a:[
        ["En prise de space (entry).","duelist"],
        ["En prise dâ€™info et prÃ©paration.","initiator"],
        ["En contrÃ´le de site et dÃ©coupes.","controller"],
        ["En dÃ©fense / tenue.","sentinel"],
      ]},
      en:{ q:"You feel strongest:", a:[
        ["Taking space (entry).","duelist"],
        ["Gathering info and setting up.","initiator"],
        ["Site control and slicing angles.","controller"],
        ["On defense / holding.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Quelles capacitÃ©s tâ€™attirent le plus ?", a:[
        ["MobilitÃ© / dash.","duelist"],
        ["Flash / reveal / drone.","initiator"],
        ["Smokes / walls / vision denial.","controller"],
        ["PiÃ¨ges / ralentissements / gadgets.","sentinel"],
      ]},
      en:{ q:"Which abilities attract you most?", a:[
        ["Mobility / dash.","duelist"],
        ["Flash / reveal / drone.","initiator"],
        ["Smokes / walls / vision denial.","controller"],
        ["Traps / slows / gadgets.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Ton niveau mÃ©canique (mÃ©caniques pures) ?", a:[
        ["TrÃ¨s Ã©levÃ©, je veux en profiter.","duelist"],
        ["Bon, mais je prÃ©fÃ¨re aider lâ€™entrÃ©e.","initiator"],
        ["Moyen : je gagne via utilitÃ©.","controller"],
        ["Variable : je mise sur le placement.","sentinel"],
      ]},
      en:{ q:"Your raw mechanics level?", a:[
        ["Very high, I want to leverage it.","duelist"],
        ["Good, but I prefer enabling entry.","initiator"],
        ["Average: I win through utility.","controller"],
        ["Situational: I rely on positioning.","sentinel"],
      ]}
    },
    {
      fr:{ q:"Tu veux Ãªtre :", a:[
        ["Le joueur flashy.","duelist"],
        ["Celui qui dÃ©clenche lâ€™action.","initiator"],
        ["Le cerveau du round.","controller"],
        ["Le pilier solide.","sentinel"],
      ]},
      en:{ q:"You want to be:", a:[
        ["The flashy player.","duelist"],
        ["The play starter.","initiator"],
        ["The brain of the round.","controller"],
        ["The solid anchor.","sentinel"],
      ]}
    }
  ];

  // -------------------------
  // Phase 2 - AGENT questions (10 par rÃ´le)
  // Chaque rÃ©ponse = +1 Ã  un AGENT (pas au rÃ´le).
  // Format: {fr:{q, a:[[text, agentName], ...]}, en:{...}}
  // -------------------------

  // DUELISTS (7 agents => 7 rÃ©ponses)
  const AGENT_Q_DUELIST = [
    { fr:{q:"Quand un round commence mal, ton premier rÃ©flexe est :", a:[
      ["CrÃ©er de lâ€™espace ailleurs.","Jett"],
      ["Forcer un moment de chaos.","Raze"],
      ["Chercher un duel isolÃ©.","Reyna"],
      ["Revenir progressivement dans le round.","Phoenix"],
      ["Changer complÃ¨tement de rythme.","Yoru"],
      ["AccÃ©lÃ©rer la pression.","Neon"],
      ["Reprendre un duel frontal.","Iso"],
    ]}, en:{q:"When a round starts badly, your first instinct is:", a:[
      ["Create space elsewhere.","Jett"],
      ["Force a moment of chaos.","Raze"],
      ["Look for an isolated duel.","Reyna"],
      ["Work your way back into the round.","Phoenix"],
      ["Completely change the pace.","Yoru"],
      ["Speed up the pressure.","Neon"],
      ["Take a straight-up duel.","Iso"],
    ]}},
    { fr:{q:"Quand tu gagnes un duel important, tu :", a:[
      ["Te replaces immÃ©diatement.","Jett"],
      ["Continues Ã  casser le rythme.","Raze"],
      ["Cherches Ã  enchaÃ®ner.","Reyna"],
      ["Stabilises la situation.","Phoenix"],
      ["Deviens imprÃ©visible.","Yoru"],
      ["Maintiens lâ€™intensitÃ©.","Neon"],
      ["Restes concentrÃ© sur le prochain duel.","Iso"],
    ]}, en:{q:"When you win an important duel, you:", a:[
      ["Reposition immediately.","Jett"],
      ["Keep breaking the rhythm.","Raze"],
      ["Try to chain fights.","Reyna"],
      ["Stabilize the situation.","Phoenix"],
      ["Become unpredictable.","Yoru"],
      ["Keep the intensity high.","Neon"],
      ["Focus on the next fair fight.","Iso"],
    ]}},
    { fr:{q:"Dans un round lent, tu te sens :", a:[
      ["Patient mais prÃªt Ã  bouger.","Jett"],
      ["FrustrÃ©, tu veux que Ã§a explose.","Raze"],
      ["En attente dâ€™une erreur.","Reyna"],
      ["Confiant dans la durÃ©e.","Phoenix"],
      ["En train de prÃ©parer quelque chose.","Yoru"],
      ["SurvoltÃ©.","Neon"],
      ["Stable.","Iso"],
    ]}, en:{q:"In a slow round, you feel:", a:[
      ["Patient but ready to move.","Jett"],
      ["Frustrated â€” you want it to blow up.","Raze"],
      ["Waiting for a mistake.","Reyna"],
      ["Confident over time.","Phoenix"],
      ["Setting something up.","Yoru"],
      ["Wired / hyped.","Neon"],
      ["Steady.","Iso"],
    ]}},
    { fr:{q:"Ton plus grand atout en Duelist :", a:[
      ["ContrÃ´le en mouvement.","Jett"],
      ["Impact immÃ©diat.","Raze"],
      ["Confiance / domination mentale.","Reyna"],
      ["CapacitÃ© Ã  revenir aprÃ¨s un mauvais dÃ©part.","Phoenix"],
      ["CrÃ©ativitÃ© / mindgame.","Yoru"],
      ["Ã‰nergie / pression continue.","Neon"],
      ["Discipline en face-Ã -face.","Iso"],
    ]}, en:{q:"Your biggest Duelist strength:", a:[
      ["Control while moving.","Jett"],
      ["Immediate impact.","Raze"],
      ["Confidence / mental dominance.","Reyna"],
      ["Ability to bounce back.","Phoenix"],
      ["Creativity / mindgames.","Yoru"],
      ["Energy / constant pressure.","Neon"],
      ["Discipline in fair duels.","Iso"],
    ]}},
    { fr:{q:"En 1v2, ton plan naturel :", a:[
      ["Repositionner pour sÃ©parer.","Jett"],
      ["Provoquer une erreur via le chaos.","Raze"],
      ["Isoler puis enchaÃ®ner.","Reyna"],
      ["Gagner du temps puis revenir.","Phoenix"],
      ["Feinter pour dÃ©sorienter.","Yoru"],
      ["AccÃ©lÃ©rer pour prendre de vitesse.","Neon"],
      ["Prendre un duel propre, puis le second.","Iso"],
    ]}, en:{q:"In a 1v2, your natural plan:", a:[
      ["Reposition to split them.","Jett"],
      ["Create mistakes through chaos.","Raze"],
      ["Isolate then chain.","Reyna"],
      ["Buy time then come back.","Phoenix"],
      ["Fake to disorient.","Yoru"],
      ["Speed up to overwhelm.","Neon"],
      ["Take a clean duel, then the second.","Iso"],
    ]}},
    { fr:{q:"Tu veux que lâ€™adversaire ressente :", a:[
      ["De lâ€™incertitude face Ã  tes positions.","Jett"],
      ["De la panique.","Raze"],
      ["Quâ€™il est â€œpunishedâ€.","Reyna"],
      ["Quâ€™il nâ€™arrive pas Ã  te finir.","Phoenix"],
      ["Quâ€™il est perdu.","Yoru"],
      ["Quâ€™il est dÃ©passÃ©.","Neon"],
      ["Quâ€™il doit te respecter en duel.","Iso"],
    ]}, en:{q:"You want the enemy to feel:", a:[
      ["Uncertainty about your positions.","Jett"],
      ["Panic.","Raze"],
      ["Theyâ€™re being punished.","Reyna"],
      ["They canâ€™t finish you off.","Phoenix"],
      ["Theyâ€™re lost.","Yoru"],
      ["Theyâ€™re outpaced.","Neon"],
      ["They must respect your duels.","Iso"],
    ]}},
    { fr:{q:"Quand tu rates un duel, tu :", a:[
      ["Ajustes ton angle et reviens ailleurs.","Jett"],
      ["Re-forces vite pour reprendre le tempo.","Raze"],
      ["Cherches un pick rapide pour â€œresetâ€.","Reyna"],
      ["Reviens plus safe et progressif.","Phoenix"],
      ["Changes complÃ¨tement de pattern.","Yoru"],
      ["Augmentes encore le rythme.","Neon"],
      ["Reviens plus propre techniquement.","Iso"],
    ]}, en:{q:"When you lose a duel, you:", a:[
      ["Adjust your angle and re-appear elsewhere.","Jett"],
      ["Re-force quickly to take tempo back.","Raze"],
      ["Look for a fast pick to reset.","Reyna"],
      ["Come back safer and progressive.","Phoenix"],
      ["Change your pattern completely.","Yoru"],
      ["Ramp the pace up even more.","Neon"],
      ["Return cleaner mechanically.","Iso"],
    ]}},
    { fr:{q:"Ton style par dÃ©faut :", a:[
      ["Fluide.","Jett"],
      ["Intense.","Raze"],
      ["Opportuniste.","Reyna"],
      ["RÃ©sistant.","Phoenix"],
      ["ImprÃ©visible.","Yoru"],
      ["Dynamique.","Neon"],
      ["Frontal.","Iso"],
    ]}, en:{q:"Your default style:", a:[
      ["Fluid.","Jett"],
      ["Intense.","Raze"],
      ["Opportunistic.","Reyna"],
      ["Resilient.","Phoenix"],
      ["Unpredictable.","Yoru"],
      ["Dynamic.","Neon"],
      ["Head-on.","Iso"],
    ]}},
    { fr:{q:"En situation trÃ¨s tendue, tu :", a:[
      ["CrÃ©es de la distance et re-angles.","Jett"],
      ["Forces lâ€™erreur adverse.","Raze"],
      ["Joues le snowball mental.","Reyna"],
      ["Gagnes du temps pour revenir.","Phoenix"],
      ["Manipules les attentes.","Yoru"],
      ["Submerges au rythme.","Neon"],
      ["Cherches le duel le plus â€œjusteâ€.","Iso"],
    ]}, en:{q:"In high pressure, you:", a:[
      ["Create distance and re-angle.","Jett"],
      ["Force an enemy mistake.","Raze"],
      ["Play the mental snowball.","Reyna"],
      ["Buy time to come back.","Phoenix"],
      ["Manipulate expectations.","Yoru"],
      ["Overwhelm with pace.","Neon"],
      ["Look for the fairest duel.","Iso"],
    ]}},
  ];

  // INITIATORS (6 agents => 6 rÃ©ponses)
  // Sova / Skye / Fade / Breach / KAY/O / Gekko
  const AGENT_Q_INITIATOR = [
    { fr:{q:"Quand ton Ã©quipe hÃ©site, tu aides surtout en :", a:[
      ["Donnant une info claire avant dâ€™agir.","Sova"],
      ["Rassurant et lanÃ§ant lâ€™action.","Skye"],
      ["Faisant sentir une prÃ©sence oppressante.","Fade"],
      ["CrÃ©ant un moment â€œgoâ€ trÃ¨s net.","Breach"],
      ["Coupant les options adverses.","KAY/O"],
      ["Trouvant une solution simple et pratique.","Gekko"],
    ]}, en:{q:"When your team hesitates, you help by:", a:[
      ["Providing clear info before acting.","Sova"],
      ["Reassuring and starting the action.","Skye"],
      ["Making your presence feel oppressive.","Fade"],
      ["Creating a very clear 'go' moment.","Breach"],
      ["Cutting enemy options.","KAY/O"],
      ["Finding a simple practical solution.","Gekko"],
    ]}},
    { fr:{q:"Ton utilitaire idÃ©al doit :", a:[
      ["Confirmer une zone sans dÃ©bat.","Sova"],
      ["Ouvrir une entrÃ©e propre pour lâ€™Ã©quipe.","Skye"],
      ["Mettre lâ€™adversaire mal Ã  lâ€™aise.","Fade"],
      ["DÃ©structurer un push dâ€™un coup.","Breach"],
      ["EmpÃªcher les â€˜combosâ€™ adverses.","KAY/O"],
      ["Donner plusieurs petites options faciles.","Gekko"],
    ]}, en:{q:"Your ideal utility should:", a:[
      ["Confirm an area clearly.","Sova"],
      ["Open a clean entry for the team.","Skye"],
      ["Make the enemy uncomfortable.","Fade"],
      ["Shatter a push in one go.","Breach"],
      ["Stop enemy combos.","KAY/O"],
      ["Give several easy options.","Gekko"],
    ]}},
    { fr:{q:"En dÃ©fense, tu prÃ©fÃ¨res :", a:[
      ["Lire la map et prÃ©venir tÃ´t.","Sova"],
      ["ÃŠtre proche pour aider au contact.","Skye"],
      ["Mettre la pression mÃªme en dÃ©fense.","Fade"],
      ["Casser le rythme dâ€™un push.","Breach"],
      ["RÃ©duire lâ€™utilitÃ© adverse.","KAY/O"],
      ["RÃ©agir vite avec des outils simples.","Gekko"],
    ]}, en:{q:"On defense, you prefer:", a:[
      ["Read the map and warn early.","Sova"],
      ["Stay close to help at contact.","Skye"],
      ["Keep pressure even on defense.","Fade"],
      ["Break a pushâ€™s rhythm.","Breach"],
      ["Reduce enemy utility.","KAY/O"],
      ["React fast with simple tools.","Gekko"],
    ]}},
    { fr:{q:"En retake, ton approche naturelle :", a:[
      ["Structurer lâ€™info avant dâ€™entrer.","Sova"],
      ["Rentrer avec lâ€™Ã©quipe et sÃ©curiser.","Skye"],
      ["Traquer et isoler mentalement.","Fade"],
      ["CrÃ©er une fenÃªtre dâ€™entrÃ©e brutale.","Breach"],
      ["Neutraliser les menaces utilitaires.","KAY/O"],
      ["RÃ©cupÃ©rer la situation avec flexibilitÃ©.","Gekko"],
    ]}, en:{q:"On retake, your natural approach:", a:[
      ["Structure info before going in.","Sova"],
      ["Go in with the team and secure.","Skye"],
      ["Hunt and isolate mentally.","Fade"],
      ["Create a brutal entry window.","Breach"],
      ["Neutralize utility threats.","KAY/O"],
      ["Recover the situation with flexibility.","Gekko"],
    ]}},
    { fr:{q:"Tu es le plus utile quand :", a:[
      ["Tes calls sont basÃ©s sur des certitudes.","Sova"],
      ["Tu guides ton entry avec confiance.","Skye"],
      ["Tu fais douter les ennemis.","Fade"],
      ["Tu imposes un timing clair.","Breach"],
      ["Tu forces les ennemis Ã  jouer â€˜nuâ€™.","KAY/O"],
      ["Tu donnes des solutions rapides Ã  lâ€™Ã©quipe.","Gekko"],
    ]}, en:{q:"Youâ€™re most useful when:", a:[
      ["Your calls are based on certainty.","Sova"],
      ["You guide entry with confidence.","Skye"],
      ["You make enemies doubt.","Fade"],
      ["You impose a clear timing.","Breach"],
      ["You force enemies to play 'naked'.","KAY/O"],
      ["You give fast solutions to the team.","Gekko"],
    ]}},
    { fr:{q:"Quand tu nâ€™as pas lâ€™info, tu :", a:[
      ["Cherches Ã  la crÃ©er proprement.","Sova"],
      ["PrÃ©fÃ¨res tester avec lâ€™Ã©quipe.","Skye"],
      ["Mets la pression pour provoquer une erreur.","Fade"],
      ["Forces un moment pour obtenir une rÃ©action.","Breach"],
      ["Coupes les options et observes.","KAY/O"],
      ["Tentes une option simple et adaptable.","Gekko"],
    ]}, en:{q:"When you lack info, you:", a:[
      ["Try to create it cleanly.","Sova"],
      ["Prefer to test with the team.","Skye"],
      ["Apply pressure to force mistakes.","Fade"],
      ["Force a moment to get a reaction.","Breach"],
      ["Cut options and observe.","KAY/O"],
      ["Try a simple adaptable option.","Gekko"],
    ]}},
    { fr:{q:"Ton style de leadership :", a:[
      ["Analytique.","Sova"],
      ["Encourageant.","Skye"],
      ["Oppressant.","Fade"],
      ["DÃ©cisif.","Breach"],
      ["Anti-plan adverse.","KAY/O"],
      ["Pratique.","Gekko"],
    ]}, en:{q:"Your leadership style:", a:[
      ["Analytical.","Sova"],
      ["Encouraging.","Skye"],
      ["Oppressive.","Fade"],
      ["Decisive.","Breach"],
      ["Anti-enemy plan.","KAY/O"],
      ["Practical.","Gekko"],
    ]}},
    { fr:{q:"Ce qui te tilt le plus :", a:[
      ["Le flou / les infos contradictoires.","Sova"],
      ["Une Ã©quipe qui nâ€™ose pas entrer.","Skye"],
      ["Des ennemis qui jouent trop safe.","Fade"],
      ["Un push qui traÃ®ne trop.","Breach"],
      ["Une compo ennemie trop utilitaire.","KAY/O"],
      ["Des situations â€˜complexesâ€™ pour rien.","Gekko"],
    ]}, en:{q:"What tilts you most:", a:[
      ["Blur / contradictory info.","Sova"],
      ["A team that wonâ€™t commit.","Skye"],
      ["Enemies playing too safe.","Fade"],
      ["A push that drags on.","Breach"],
      ["An enemy comp too utility-heavy.","KAY/O"],
      ["Situations that are complex for no reason.","Gekko"],
    ]}},
    { fr:{q:"Si tu dois rÃ©sumer ton impact :", a:[
      ["Info fiable.","Sova"],
      ["EntrÃ©e sÃ©curisÃ©e.","Skye"],
      ["Pression mentale.","Fade"],
      ["Go timing.","Breach"],
      ["Neutralisation.","KAY/O"],
      ["Polyvalence simple.","Gekko"],
    ]}, en:{q:"If you summarize your impact:", a:[
      ["Reliable info.","Sova"],
      ["Secure entry.","Skye"],
      ["Mental pressure.","Fade"],
      ["Go timing.","Breach"],
      ["Neutralization.","KAY/O"],
      ["Simple versatility.","Gekko"],
    ]}},
    { fr:{q:"Quand Ã§a part en chaos, tu :", a:[
      ["Reviens Ã  lâ€™info pour calmer le jeu.","Sova"],
      ["Aides ton Ã©quipe Ã  avancer ensemble.","Skye"],
      ["Entretiens la pression pour Ã©touffer.","Fade"],
      ["CrÃ©es un â€˜stopâ€™ net dans le chaos.","Breach"],
      ["Coupe les outils pour simplifier.","KAY/O"],
      ["Trouves lâ€™option la plus simple et efficace.","Gekko"],
    ]}, en:{q:"When it becomes chaotic, you:", a:[
      ["Return to info to stabilize.","Sova"],
      ["Help your team move together.","Skye"],
      ["Keep pressure to suffocate.","Fade"],
      ["Create a hard 'stop' in the chaos.","Breach"],
      ["Cut tools to simplify.","KAY/O"],
      ["Find the simplest effective option.","Gekko"],
    ]}},
  ];

  // CONTROLLERS (6 agents => 6 rÃ©ponses)
  // Omen / Brimstone / Viper / Astra / Harbor / Clove
  const AGENT_Q_CONTROLLER = [
    { fr:{q:"Quand tu contrÃ´les un round, tu prÃ©fÃ¨res :", a:[
      ["Jouer sur les timings et lâ€™incertitude.","Omen"],
      ["Une exÃ©cution simple et carrÃ©e.","Brimstone"],
      ["Asphyxier une zone dans la durÃ©e.","Viper"],
      ["Penser la carte comme un puzzle.","Astra"],
      ["ProtÃ©ger le passage et avancer en sÃ©curitÃ©.","Harbor"],
      ["Garder la capacitÃ© de re-fight et relancer.","Clove"],
    ]}, en:{q:"When you control a round, you prefer:", a:[
      ["Play timings and uncertainty.","Omen"],
      ["A simple clean execution.","Brimstone"],
      ["Suffocate an area over time.","Viper"],
      ["Treat the map like a puzzle.","Astra"],
      ["Protect the path and move safely.","Harbor"],
      ["Keep re-fight potential and restart fights.","Clove"],
    ]}},
    { fr:{q:"Ton utilitÃ© idÃ©ale sert Ã  :", a:[
      ["CrÃ©er du doute chez lâ€™ennemi.","Omen"],
      ["Structurer lâ€™entrÃ©e sans prise de tÃªte.","Brimstone"],
      ["Verrouiller un plan sur plusieurs secondes.","Viper"],
      ["Coordonner Ã  distance.","Astra"],
      ["Couper proprement et protÃ©ger.","Harbor"],
      ["Mettre du tempo agressif.","Clove"],
    ]}, en:{q:"Your ideal utility is for:", a:[
      ["Creating doubt in the enemy.","Omen"],
      ["Structuring entry simply.","Brimstone"],
      ["Locking a plan for several seconds.","Viper"],
      ["Coordinating from distance.","Astra"],
      ["Cutting cleanly and protecting.","Harbor"],
      ["Bringing aggressive tempo.","Clove"],
    ]}},
    { fr:{q:"En dÃ©fense, tu te sens fort quand :", a:[
      ["Tu peux jouer sur le timing.","Omen"],
      ["Tu peux tenir avec un plan clair.","Brimstone"],
      ["Tu peux rendre une zone invivable.","Viper"],
      ["Tu peux contrÃ´ler plusieurs zones.","Astra"],
      ["Tu peux offrir une â€˜safe laneâ€™ Ã  lâ€™Ã©quipe.","Harbor"],
      ["Tu peux contester et recontester.","Clove"],
    ]}, en:{q:"On defense, you feel strong when:", a:[
      ["You can play timing.","Omen"],
      ["You can hold with a clear plan.","Brimstone"],
      ["You can make an area unlivable.","Viper"],
      ["You can control multiple areas.","Astra"],
      ["You can give a safe lane to your team.","Harbor"],
      ["You can contest and re-contest.","Clove"],
    ]}},
    { fr:{q:"En retake, tu prÃ©fÃ¨res :", a:[
      ["DÃ©placer la pression par surprise.","Omen"],
      ["ExÃ©cuter proprement en Ã©quipe.","Brimstone"],
      ["Gagner du temps et user lâ€™ennemi.","Viper"],
      ["CrÃ©er lâ€™ouverture au bon moment.","Astra"],
      ["Couvrir lâ€™entrÃ©e et sÃ©curiser.","Harbor"],
      ["Relancer le fight dÃ¨s quâ€™il y a une fenÃªtre.","Clove"],
    ]}, en:{q:"On retake, you prefer:", a:[
      ["Shift pressure with surprise.","Omen"],
      ["Execute cleanly with the team.","Brimstone"],
      ["Buy time and wear them down.","Viper"],
      ["Create the opening at the right time.","Astra"],
      ["Cover entry and secure.","Harbor"],
      ["Restart fights when a window appears.","Clove"],
    ]}},
    { fr:{q:"Ton point fort mental :", a:[
      ["Bluff / imprÃ©vu.","Omen"],
      ["Discipline / rÃ©gularitÃ©.","Brimstone"],
      ["Patience / contrÃ´le long.","Viper"],
      ["Vision macro.","Astra"],
      ["Protection / stabilitÃ©.","Harbor"],
      ["AgressivitÃ© contrÃ´lÃ©e.","Clove"],
    ]}, en:{q:"Your mental strength:", a:[
      ["Bluff / unpredictability.","Omen"],
      ["Discipline / consistency.","Brimstone"],
      ["Patience / long control.","Viper"],
      ["Macro vision.","Astra"],
      ["Protection / stability.","Harbor"],
      ["Controlled aggression.","Clove"],
    ]}},
    { fr:{q:"Ce qui te tilt le plus :", a:[
      ["Quand le round est trop â€˜linÃ©aireâ€™.","Omen"],
      ["Quand lâ€™Ã©quipe ne suit pas le plan.","Brimstone"],
      ["Quand on te force Ã  bouger sans cesse.","Viper"],
      ["Quand le timing dâ€™Ã©quipe est mauvais.","Astra"],
      ["Quand lâ€™Ã©quipe se disperse.","Harbor"],
      ["Quand on ne profite pas des fenÃªtres de fight.","Clove"],
    ]}, en:{q:"What tilts you most:", a:[
      ["When a round is too linear.","Omen"],
      ["When the team wonâ€™t follow the plan.","Brimstone"],
      ["When youâ€™re forced to move nonstop.","Viper"],
      ["When team timing is bad.","Astra"],
      ["When the team scatters.","Harbor"],
      ["When you donâ€™t capitalize fight windows.","Clove"],
    ]}},
    { fr:{q:"Ton style de win condition :", a:[
      ["Confusion.","Omen"],
      ["Structure.","Brimstone"],
      ["Zone denial durable.","Viper"],
      ["Coordination.","Astra"],
      ["Safe push.","Harbor"],
      ["Momentum / re-fight.","Clove"],
    ]}, en:{q:"Your win condition style:", a:[
      ["Confusion.","Omen"],
      ["Structure.","Brimstone"],
      ["Durable zone denial.","Viper"],
      ["Coordination.","Astra"],
      ["Safe push.","Harbor"],
      ["Momentum / re-fight.","Clove"],
    ]}},
    { fr:{q:"Quand tu nâ€™as pas le contrÃ´le, tu :", a:[
      ["CrÃ©es un doute et changes lâ€™angle du round.","Omen"],
      ["Simplifies et remets un plan clair.","Brimstone"],
      ["Reprends une zone et la verrouilles.","Viper"],
      ["Replaces tes piÃ¨ces pour reprendre la macro.","Astra"],
      ["ProtÃ¨ges une trajectoire et reconstruis.","Harbor"],
      ["Contestes pour relancer la dynamique.","Clove"],
    ]}, en:{q:"When you lack control, you:", a:[
      ["Create doubt and change the roundâ€™s angle.","Omen"],
      ["Simplify and restore a clear plan.","Brimstone"],
      ["Reclaim an area and lock it.","Viper"],
      ["Reposition your pieces to regain macro.","Astra"],
      ["Protect a path and rebuild.","Harbor"],
      ["Contest to restart momentum.","Clove"],
    ]}},
    { fr:{q:"Tu te dÃ©cris comme :", a:[
      ["Discret.","Omen"],
      ["MÃ©thodique.","Brimstone"],
      ["Intransigeant.","Viper"],
      ["Calculateur.","Astra"],
      ["Protecteur.","Harbor"],
      ["Combatif.","Clove"],
    ]}, en:{q:"You describe yourself as:", a:[
      ["Quiet.","Omen"],
      ["Methodical.","Brimstone"],
      ["Uncompromising.","Viper"],
      ["Calculating.","Astra"],
      ["Protective.","Harbor"],
      ["Fighty.","Clove"],
    ]}},
    { fr:{q:"Si tu rÃ©sumes ton impact :", a:[
      ["Timings & mindgames.","Omen"],
      ["ExÃ©cutions propres.","Brimstone"],
      ["ContrÃ´le long.","Viper"],
      ["Macro / contrÃ´le global.","Astra"],
      ["Protection & couloirs sÃ»rs.","Harbor"],
      ["Re-fight & tempo.","Clove"],
    ]}, en:{q:"If you summarize your impact:", a:[
      ["Timings & mindgames.","Omen"],
      ["Clean executes.","Brimstone"],
      ["Long control.","Viper"],
      ["Macro / global control.","Astra"],
      ["Protection & safe lanes.","Harbor"],
      ["Re-fight & tempo.","Clove"],
    ]}},
  ];

  // SENTINELS (5 agents => 5 rÃ©ponses)
  // Killjoy / Cypher / Sage / Chamber / Deadlock
  const AGENT_Q_SENTINEL = [
    { fr:{q:"Quand tu dÃ©fends, tu prÃ©fÃ¨res :", a:[
      ["Une dÃ©fense â€˜automatiqueâ€™ et structurÃ©e.","Killjoy"],
      ["Observer et piÃ©ger lâ€™info.","Cypher"],
      ["ProtÃ©ger et stabiliser lâ€™Ã©quipe.","Sage"],
      ["Punir par la prÃ©cision.","Chamber"],
      ["Bloquer et verrouiller une zone.","Deadlock"],
    ]}, en:{q:"When defending, you prefer:", a:[
      ["An automated structured defense.","Killjoy"],
      ["Observe and trap info.","Cypher"],
      ["Protect and stabilize the team.","Sage"],
      ["Punish with precision.","Chamber"],
      ["Block and lock an area.","Deadlock"],
    ]}},
    { fr:{q:"En attaque, ton rÃ´le naturel :", a:[
      ["SÃ©curiser le flank avec rigueur.","Killjoy"],
      ["Garder lâ€™info et contrÃ´ler les rotations.","Cypher"],
      ["Assurer la survie du groupe.","Sage"],
      ["Chercher un pick propre.","Chamber"],
      ["SÃ©curiser une zone clÃ© et empÃªcher les retakes.","Deadlock"],
    ]}, en:{q:"On attack, your natural job:", a:[
      ["Secure flank with rigor.","Killjoy"],
      ["Hold info and control rotations.","Cypher"],
      ["Keep the group alive.","Sage"],
      ["Look for a clean pick.","Chamber"],
      ["Secure key space and stop retakes.","Deadlock"],
    ]}},
    { fr:{q:"Ce qui te fait le plus plaisir :", a:[
      ["Un setup qui gagne tout seul.","Killjoy"],
      ["Un round gagnÃ© par la lecture.","Cypher"],
      ["Sauver un round pour lâ€™Ã©quipe.","Sage"],
      ["Un duel clean qui fait basculer.","Chamber"],
      ["Un ennemi complÃ¨tement stoppÃ©.","Deadlock"],
    ]}, en:{q:"What you enjoy most:", a:[
      ["A setup that wins by itself.","Killjoy"],
      ["Winning through reading them.","Cypher"],
      ["Saving a round for the team.","Sage"],
      ["A clean duel that flips the round.","Chamber"],
      ["An enemy fully stopped.","Deadlock"],
    ]}},
    { fr:{q:"En retake, tu prÃ©fÃ¨res :", a:[
      ["RÃ©cupÃ©rer une zone avec mÃ©thode.","Killjoy"],
      ["Avoir lâ€™info avant dâ€™avancer.","Cypher"],
      ["Aider lâ€™Ã©quipe Ã  survivre et progresser.","Sage"],
      ["Prendre un pick puis reculer.","Chamber"],
      ["Fermer un passage pour rÃ©duire les options.","Deadlock"],
    ]}, en:{q:"On retake, you prefer:", a:[
      ["Reclaim space methodically.","Killjoy"],
      ["Get info before moving.","Cypher"],
      ["Help the team survive and progress.","Sage"],
      ["Take a pick then fall back.","Chamber"],
      ["Close a path to reduce options.","Deadlock"],
    ]}},
    { fr:{q:"Quand Ã§a devient chaotique, tu :", a:[
      ["Reviens Ã  un plan structurÃ©.","Killjoy"],
      ["Cherches lâ€™info pour remettre de lâ€™ordre.","Cypher"],
      ["Ralentis pour stabiliser.","Sage"],
      ["Profites du chaos pour punir.","Chamber"],
      ["Bloques pour stopper la vague.","Deadlock"],
    ]}, en:{q:"When it gets chaotic, you:", a:[
      ["Return to a structured plan.","Killjoy"],
      ["Look for info to restore order.","Cypher"],
      ["Slow it down to stabilize.","Sage"],
      ["Use the chaos to punish.","Chamber"],
      ["Block to stop the wave.","Deadlock"],
    ]}},
    { fr:{q:"Ton style mental :", a:[
      ["IngÃ©nieur.","Killjoy"],
      ["Analyste.","Cypher"],
      ["Gardien.","Sage"],
      ["Tireur.","Chamber"],
      ["Mur.","Deadlock"],
    ]}, en:{q:"Your mental style:", a:[
      ["Engineer.","Killjoy"],
      ["Analyst.","Cypher"],
      ["Guardian.","Sage"],
      ["Sharpshooter.","Chamber"],
      ["Wall.","Deadlock"],
    ]}},
    { fr:{q:"Ton dÃ©faut le plus probable :", a:[
      ["Trop attachÃ© au plan.","Killjoy"],
      ["Trop dans lâ€™observation.","Cypher"],
      ["Trop dans lâ€™aide, pas assez dâ€™initiative.","Sage"],
      ["Trop individualiste.","Chamber"],
      ["Trop rigide.","Deadlock"],
    ]}, en:{q:"Your most likely flaw:", a:[
      ["Too attached to the plan.","Killjoy"],
      ["Too much observation.","Cypher"],
      ["Too supportive, not enough initiative.","Sage"],
      ["Too individualistic.","Chamber"],
      ["Too rigid.","Deadlock"],
    ]}},
    { fr:{q:"Tu te sens fort quand :", a:[
      ["Tout est sous contrÃ´le.","Killjoy"],
      ["Tu sais oÃ¹ ils sont / vont aller.","Cypher"],
      ["Ton Ã©quipe tient grÃ¢ce Ã  toi.","Sage"],
      ["Tu imposes le respect sur les angles.","Chamber"],
      ["Tu fermes les options.","Deadlock"],
    ]}, en:{q:"You feel strong when:", a:[
      ["Everything is under control.","Killjoy"],
      ["You know where they are / will go.","Cypher"],
      ["Your team holds because of you.","Sage"],
      ["You command respect on angles.","Chamber"],
      ["You close options.","Deadlock"],
    ]}},
    { fr:{q:"Ton style de victoire :", a:[
      ["Setup.","Killjoy"],
      ["Info.","Cypher"],
      ["Soutien.","Sage"],
      ["Pick.","Chamber"],
      ["Verrouillage.","Deadlock"],
    ]}, en:{q:"Your win style:", a:[
      ["Setup.","Killjoy"],
      ["Info.","Cypher"],
      ["Support.","Sage"],
      ["Pick.","Chamber"],
      ["Lockdown.","Deadlock"],
    ]}},
    { fr:{q:"Si tu rÃ©sumes ton rÃ´le en un mot :", a:[
      ["ContrÃ´le.","Killjoy"],
      ["Surveillance.","Cypher"],
      ["Protection.","Sage"],
      ["Punition.","Chamber"],
      ["Blocage.","Deadlock"],
    ]}, en:{q:"If you summarize your role in one word:", a:[
      ["Control.","Killjoy"],
      ["Surveillance.","Cypher"],
      ["Protection.","Sage"],
      ["Punishment.","Chamber"],
      ["Blockage.","Deadlock"],
    ]}},
  ];

  // -------------------------
  // Agent banks per role
  // -------------------------
  const AGENTS_BY_ROLE = {
    duelist: ["Jett","Raze","Reyna","Phoenix","Yoru","Neon","Iso"],
    initiator: ["Sova","Skye","Fade","Breach","KAY/O","Gekko"],
    controller: ["Omen","Brimstone","Viper","Astra","Harbor","Clove"],
    sentinel: ["Killjoy","Cypher","Sage","Chamber","Deadlock"]
  };

  const AGENT_QUESTIONS_BY_ROLE = {
    duelist: AGENT_Q_DUELIST,
    initiator: AGENT_Q_INITIATOR,
    controller: AGENT_Q_CONTROLLER,
    sentinel: AGENT_Q_SENTINEL
  };

  // -------------------------
  // Agent tiebreak questions (PAIRWISE) for ALL roles
  // Each is 2 options: A -> agent1, B -> agent2 (order as written).
  // -------------------------
  const TIEBREAK_BY_ROLE = {
    duelist: {
      // Jett
      [pairKey("Jett","Raze")]: {
        fr:{ q:"Quand un round doit basculer, tu prÃ©fÃ¨res :", a:[
          ["CrÃ©er une ouverture propre.","Jett"],
          ["Faire exploser la situation.","Raze"],
        ]},
        en:{ q:"When a round must flip, you prefer to:", a:[
          ["Create a clean opening.","Jett"],
          ["Explode the situation.","Raze"],
        ]}
      },
      [pairKey("Jett","Reyna")]: {
        fr:{ q:"En duel important, tu comptes surtout sur :", a:[
          ["ÃŠtre difficile Ã  punir.","Jett"],
          ["Prendre le contrÃ´le mental.","Reyna"],
        ]},
        en:{ q:"In a key duel, you rely on:", a:[
          ["Being hard to punish.","Jett"],
          ["Taking mental control.","Reyna"],
        ]}
      },
      [pairKey("Jett","Phoenix")]: {
        fr:{ q:"Si tu prends un risque :", a:[
          ["Tu veux pouvoir tâ€™Ã©chapper.","Jett"],
          ["Tu veux pouvoir revenir.","Phoenix"],
        ]},
        en:{ q:"If you take a risk:", a:[
          ["You want to be able to escape.","Jett"],
          ["You want to be able to come back.","Phoenix"],
        ]}
      },
      [pairKey("Jett","Yoru")]: {
        fr:{ q:"Tu prÃ©fÃ¨res gagner grÃ¢ce :", a:[
          ["Ã€ ta mÃ©canique.","Jett"],
          ["Ã€ ton imprÃ©visibilitÃ©.","Yoru"],
        ]},
        en:{ q:"You prefer winning through:", a:[
          ["Your mechanics.","Jett"],
          ["Your unpredictability.","Yoru"],
        ]}
      },
      [pairKey("Jett","Neon")]: {
        fr:{ q:"Ton style naturel est :", a:[
          ["MaÃ®trisÃ©.","Jett"],
          ["Ã‰lectrique.","Neon"],
        ]},
        en:{ q:"Your natural style is:", a:[
          ["Controlled.","Jett"],
          ["Electric.","Neon"],
        ]}
      },
      [pairKey("Jett","Iso")]: {
        fr:{ q:"Tu te sens plus fort quand :", a:[
          ["Tu peux bouger librement.","Jett"],
          ["Le duel est frontal.","Iso"],
        ]},
        en:{ q:"You feel stronger when:", a:[
          ["You can move freely.","Jett"],
          ["The duel is straight-up.","Iso"],
        ]}
      },

      // Raze
      [pairKey("Raze","Reyna")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[
          ["Mettre la pression sur plusieurs joueurs.","Raze"],
          ["Dominer un joueur Ã  la fois.","Reyna"],
        ]},
        en:{ q:"You prefer to:", a:[
          ["Pressure multiple players.","Raze"],
          ["Dominate one player at a time.","Reyna"],
        ]}
      },
      [pairKey("Raze","Phoenix")]: {
        fr:{ q:"Tu veux que ton impact soit :", a:[
          ["Brutal.","Raze"],
          ["Progressif.","Phoenix"],
        ]},
        en:{ q:"You want your impact to be:", a:[
          ["Brutal.","Raze"],
          ["Progressive.","Phoenix"],
        ]}
      },
      [pairKey("Raze","Yoru")]: {
        fr:{ q:"Tu gagnes plus souvent grÃ¢ce :", a:[
          ["Ã€ la pression constante.","Raze"],
          ["Ã€ la confusion.","Yoru"],
        ]},
        en:{ q:"You win more often through:", a:[
          ["Constant pressure.","Raze"],
          ["Confusion.","Yoru"],
        ]}
      },
      [pairKey("Raze","Neon")]: {
        fr:{ q:"Tu es plus :", a:[
          ["Explosion.","Raze"],
          ["Vitesse.","Neon"],
        ]},
        en:{ q:"You are more:", a:[
          ["Explosion.","Raze"],
          ["Speed.","Neon"],
        ]}
      },
      [pairKey("Raze","Iso")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[
          ["DÃ©sÃ©quilibrer.","Raze"],
          ["Duel pur.","Iso"],
        ]},
        en:{ q:"You prefer:", a:[
          ["Disrupting.","Raze"],
          ["Pure duel.","Iso"],
        ]}
      },

      // Reyna
      [pairKey("Reyna","Phoenix")]: {
        fr:{ q:"Tu te sens le plus fort quand :", a:[
          ["Tu prends lâ€™avantage.","Reyna"],
          ["Tu peux revenir.","Phoenix"],
        ]},
        en:{ q:"You feel strongest when:", a:[
          ["You gain the advantage.","Reyna"],
          ["You can come back.","Phoenix"],
        ]}
      },
      [pairKey("Reyna","Yoru")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[
          ["Punir.","Reyna"],
          ["Tromper.","Yoru"],
        ]},
        en:{ q:"You prefer to:", a:[
          ["Punish.","Reyna"],
          ["Trick.","Yoru"],
        ]}
      },
      [pairKey("Reyna","Neon")]: {
        fr:{ q:"Tu es plus :", a:[
          ["PrÃ©dateur.","Reyna"],
          ["Pression constante.","Neon"],
        ]},
        en:{ q:"You are more:", a:[
          ["Predator.","Reyna"],
          ["Constant pressure.","Neon"],
        ]}
      },
      [pairKey("Reyna","Iso")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[
          ["Snowball.","Reyna"],
          ["Duel Ã©quilibrÃ©.","Iso"],
        ]},
        en:{ q:"You prefer:", a:[
          ["Snowballing.","Reyna"],
          ["Balanced duel.","Iso"],
        ]}
      },

      // Phoenix
      [pairKey("Phoenix","Yoru")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[
          ["Stabiliser le round.","Phoenix"],
          ["Le dÃ©sorienter.","Yoru"],
        ]},
        en:{ q:"You prefer to:", a:[
          ["Stabilize the round.","Phoenix"],
          ["Disorient it.","Yoru"],
        ]}
      },
      [pairKey("Phoenix","Neon")]: {
        fr:{ q:"Tu es plus :", a:[
          ["RÃ©silient.","Phoenix"],
          ["AccÃ©lÃ©rateur.","Neon"],
        ]},
        en:{ q:"You are more:", a:[
          ["Resilient.","Phoenix"],
          ["Accelerator.","Neon"],
        ]}
      },
      [pairKey("Phoenix","Iso")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[
          ["DeuxiÃ¨me chance.","Phoenix"],
          ["Face Ã  face.","Iso"],
        ]},
        en:{ q:"You prefer:", a:[
          ["Second chance.","Phoenix"],
          ["Face-to-face.","Iso"],
        ]}
      },

      // Yoru
      [pairKey("Yoru","Neon")]: {
        fr:{ q:"Tu es plus :", a:[
          ["ImprÃ©visible.","Yoru"],
          ["Rapide.","Neon"],
        ]},
        en:{ q:"You are more:", a:[
          ["Unpredictable.","Yoru"],
          ["Fast.","Neon"],
        ]}
      },
      [pairKey("Yoru","Iso")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[
          ["Manipuler.","Yoru"],
          ["DÃ©fier.","Iso"],
        ]},
        en:{ q:"You prefer to:", a:[
          ["Manipulate.","Yoru"],
          ["Challenge.","Iso"],
        ]}
      },

      // Neon
      [pairKey("Neon","Iso")]: {
        fr:{ q:"Tu es plus :", a:[
          ["Mouvement.","Neon"],
          ["Duel.","Iso"],
        ]},
        en:{ q:"You are more:", a:[
          ["Movement.","Neon"],
          ["Duel.","Iso"],
        ]}
      },
    },

    initiator: {
      // Agents: Sova, Skye, Fade, Breach, KAY/O, Gekko (15 pairs)
      [pairKey("Sova","Skye")]: {
        fr:{ q:"Tu aides surtout ton Ã©quipe en :", a:[["Clarifiant lâ€™info.","Sova"],["Boostant la confiance au contact.","Skye"]] },
        en:{ q:"You help your team mainly by:", a:[["Clarifying info.","Sova"],["Boosting confidence at contact.","Skye"]] }
      },
      [pairKey("Sova","Fade")]: {
        fr:{ q:"Tu veux que lâ€™ennemi ressente :", a:[["Quâ€™il est repÃ©rÃ©.","Sova"],["Quâ€™il est traquÃ©.","Fade"]] },
        en:{ q:"You want the enemy to feel:", a:[["They are spotted.","Sova"],["They are hunted.","Fade"]] }
      },
      [pairKey("Sova","Breach")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["PrÃ©parer avant dâ€™entrer.","Sova"],["CrÃ©er un â€˜GOâ€™ net.","Breach"]] },
        en:{ q:"You prefer to:", a:[["Prep before entry.","Sova"],["Create a clear 'GO'.","Breach"]] }
      },
      [pairKey("Sova","KAY/O")]: {
        fr:{ q:"Ton impact idÃ©al :", a:[["Info fiable.","Sova"],["RÃ©duire les options adverses.","KAY/O"]] },
        en:{ q:"Your ideal impact:", a:[["Reliable info.","Sova"],["Reduce enemy options.","KAY/O"]] }
      },
      [pairKey("Sova","Gekko")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Certitude.","Sova"],["Solutions simples et flexibles.","Gekko"]] },
        en:{ q:"You prefer:", a:[["Certainty.","Sova"],["Simple flexible solutions.","Gekko"]] }
      },
      [pairKey("Skye","Fade")]: {
        fr:{ q:"Tu te sens plus fort quand :", a:[["Tu accompagnes le contact.","Skye"],["Tu mets une pression mentale.","Fade"]] },
        en:{ q:"You feel stronger when:", a:[["You accompany contact.","Skye"],["You apply mental pressure.","Fade"]] }
      },
      [pairKey("Skye","Breach")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Faciliter lâ€™entrÃ©e.","Skye"],["Forcer lâ€™ouverture.","Breach"]] },
        en:{ q:"You prefer to:", a:[["Enable entry.","Skye"],["Force the opening.","Breach"]] }
      },
      [pairKey("Skye","KAY/O")]: {
        fr:{ q:"Ta prioritÃ© :", a:[["Mettre lâ€™Ã©quipe Ã  lâ€™aise.","Skye"],["Casser les plans adverses.","KAY/O"]] },
        en:{ q:"Your priority:", a:[["Make the team comfortable.","Skye"],["Break enemy plans.","KAY/O"]] }
      },
      [pairKey("Skye","Gekko")]: {
        fr:{ q:"Tu es plus :", a:[["Leader de contact.","Skye"],["Pratique et adaptable.","Gekko"]] },
        en:{ q:"You are more:", a:[["Contact leader.","Skye"],["Practical and adaptable.","Gekko"]] }
      },
      [pairKey("Fade","Breach")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Ã‰touffer progressivement.","Fade"],["Frapper dâ€™un coup.","Breach"]] },
        en:{ q:"You prefer to:", a:[["Suffocate gradually.","Fade"],["Hit in one go.","Breach"]] }
      },
      [pairKey("Fade","KAY/O")]: {
        fr:{ q:"Tu veux surtout :", a:[["Les faire douter.","Fade"],["Les priver dâ€™outils.","KAY/O"]] },
        en:{ q:"You want mainly to:", a:[["Make them doubt.","Fade"],["Deny their tools.","KAY/O"]] }
      },
      [pairKey("Fade","Gekko")]: {
        fr:{ q:"Ton style :", a:[["Oppressant.","Fade"],["Polyvalent simple.","Gekko"]] },
        en:{ q:"Your style:", a:[["Oppressive.","Fade"],["Simple versatile.","Gekko"]] }
      },
      [pairKey("Breach","KAY/O")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["CrÃ©er une fenÃªtre dâ€™entrÃ©e.","Breach"],["Neutraliser avant dâ€™entrer.","KAY/O"]] },
        en:{ q:"You prefer to:", a:[["Create an entry window.","Breach"],["Neutralize before entry.","KAY/O"]] }
      },
      [pairKey("Breach","Gekko")]: {
        fr:{ q:"Tu es plus :", a:[["Impact direct.","Breach"],["Multi-options faciles.","Gekko"]] },
        en:{ q:"You are more:", a:[["Direct impact.","Breach"],["Easy multi-options.","Gekko"]] }
      },
      [pairKey("KAY/O","Gekko")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Anti-plan adverse.","KAY/O"],["Adaptation simple.","Gekko"]] },
        en:{ q:"You prefer:", a:[["Anti-enemy plan.","KAY/O"],["Simple adaptation.","Gekko"]] }
      },
    },

    controller: {
      // Agents: Omen, Brimstone, Viper, Astra, Harbor, Clove (15 pairs)
      [pairKey("Omen","Brimstone")]: {
        fr:{ q:"Tu prÃ©fÃ¨res gagner par :", a:[["Doute & timings.","Omen"],["Plan simple et propre.","Brimstone"]] },
        en:{ q:"You prefer winning through:", a:[["Doubt & timings.","Omen"],["Simple clean plan.","Brimstone"]] }
      },
      [pairKey("Omen","Viper")]: {
        fr:{ q:"Tu es plus :", a:[["ImprÃ©vu.","Omen"],["ContrÃ´le long.","Viper"]] },
        en:{ q:"You are more:", a:[["Unpredictable.","Omen"],["Long control.","Viper"]] }
      },
      [pairKey("Omen","Astra")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Jouer le round au feeling.","Omen"],["Coordonner Ã  distance.","Astra"]] },
        en:{ q:"You prefer to:", a:[["Play by feel.","Omen"],["Coordinate from afar.","Astra"]] }
      },
      [pairKey("Omen","Harbor")]: {
        fr:{ q:"Ta prioritÃ© :", a:[["DÃ©sorienter.","Omen"],["ProtÃ©ger une trajectoire.","Harbor"]] },
        en:{ q:"Your priority:", a:[["Disorient.","Omen"],["Protect a path.","Harbor"]] }
      },
      [pairKey("Omen","Clove")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Mindgames.","Omen"],["Re-fight & tempo.","Clove"]] },
        en:{ q:"You prefer:", a:[["Mindgames.","Omen"],["Re-fight & tempo.","Clove"]] }
      },
      [pairKey("Brimstone","Viper")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["ExÃ©cuter simple.","Brimstone"],["Verrouiller longtemps.","Viper"]] },
        en:{ q:"You prefer to:", a:[["Execute simply.","Brimstone"],["Lock down longer.","Viper"]] }
      },
      [pairKey("Brimstone","Astra")]: {
        fr:{ q:"Tu es plus :", a:[["Leader terrain.","Brimstone"],["Macro / puzzle.","Astra"]] },
        en:{ q:"You are more:", a:[["Field leader.","Brimstone"],["Macro / puzzle.","Astra"]] }
      },
      [pairKey("Brimstone","Harbor")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Plan carrÃ©.","Brimstone"],["SÃ©curitÃ© en avanÃ§ant.","Harbor"]] },
        en:{ q:"You prefer:", a:[["Clean plan.","Brimstone"],["Safety while moving.","Harbor"]] }
      },
      [pairKey("Brimstone","Clove")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Structure.","Brimstone"],["Tempo agressif.","Clove"]] },
        en:{ q:"You prefer:", a:[["Structure.","Brimstone"],["Aggressive tempo.","Clove"]] }
      },
      [pairKey("Viper","Astra")]: {
        fr:{ q:"Tu contrÃ´les plutÃ´t :", a:[["Une zone dans le temps.","Viper"],["La map Ã  distance.","Astra"]] },
        en:{ q:"You control more:", a:[["An area over time.","Viper"],["The map from afar.","Astra"]] }
      },
      [pairKey("Viper","Harbor")]: {
        fr:{ q:"Ton style :", a:[["Asphyxier.","Viper"],["ProtÃ©ger & avancer.","Harbor"]] },
        en:{ q:"Your style:", a:[["Suffocate.","Viper"],["Protect & advance.","Harbor"]] }
      },
      [pairKey("Viper","Clove")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["ContrÃ´le long.","Viper"],["Relance de fights.","Clove"]] },
        en:{ q:"You prefer:", a:[["Long control.","Viper"],["Fight resets.","Clove"]] }
      },
      [pairKey("Astra","Harbor")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Coordination globale.","Astra"],["SÃ©curitÃ© locale.","Harbor"]] },
        en:{ q:"You prefer:", a:[["Global coordination.","Astra"],["Local safety.","Harbor"]] }
      },
      [pairKey("Astra","Clove")]: {
        fr:{ q:"Tu es plus :", a:[["Planificateur.","Astra"],["Combatif.","Clove"]] },
        en:{ q:"You are more:", a:[["Planner.","Astra"],["Fighty.","Clove"]] }
      },
      [pairKey("Harbor","Clove")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["ProtÃ©ger le groupe.","Harbor"],["Re-fight et tempo.","Clove"]] },
        en:{ q:"You prefer:", a:[["Protect the group.","Harbor"],["Re-fight and tempo.","Clove"]] }
      },
    },

    sentinel: {
      // Agents: Killjoy, Cypher, Sage, Chamber, Deadlock (10 pairs)
      [pairKey("Killjoy","Cypher")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Setup structurÃ©.","Killjoy"],["Lecture & info.","Cypher"]] },
        en:{ q:"You prefer:", a:[["Structured setup.","Killjoy"],["Reading & info.","Cypher"]] }
      },
      [pairKey("Killjoy","Sage")]: {
        fr:{ q:"Ta prioritÃ© :", a:[["SÃ©curiser par le plan.","Killjoy"],["SÃ©curiser par le soutien.","Sage"]] },
        en:{ q:"Your priority:", a:[["Secure via plan.","Killjoy"],["Secure via support.","Sage"]] }
      },
      [pairKey("Killjoy","Chamber")]: {
        fr:{ q:"Tu gagnes plutÃ´t par :", a:[["ContrÃ´le.","Killjoy"],["Punition en duel.","Chamber"]] },
        en:{ q:"You win more through:", a:[["Control.","Killjoy"],["Duel punishment.","Chamber"]] }
      },
      [pairKey("Killjoy","Deadlock")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Automatiser la dÃ©fense.","Killjoy"],["Fermer les options.","Deadlock"]] },
        en:{ q:"You prefer:", a:[["Automate defense.","Killjoy"],["Close options.","Deadlock"]] }
      },
      [pairKey("Cypher","Sage")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Info et lecture.","Cypher"],["Protection et stabilitÃ©.","Sage"]] },
        en:{ q:"You prefer:", a:[["Info and reading.","Cypher"],["Protection and stability.","Sage"]] }
      },
      [pairKey("Cypher","Chamber")]: {
        fr:{ q:"Tu es plus :", a:[["Observateur.","Cypher"],["Punisseur.","Chamber"]] },
        en:{ q:"You are more:", a:[["Observer.","Cypher"],["Punisher.","Chamber"]] }
      },
      [pairKey("Cypher","Deadlock")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Surveiller.","Cypher"],["Bloquer.","Deadlock"]] },
        en:{ q:"You prefer:", a:[["Watch.","Cypher"],["Block.","Deadlock"]] }
      },
      [pairKey("Sage","Chamber")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Sauver lâ€™Ã©quipe.","Sage"],["Prendre un pick propre.","Chamber"]] },
        en:{ q:"You prefer:", a:[["Save the team.","Sage"],["Take a clean pick.","Chamber"]] }
      },
      [pairKey("Sage","Deadlock")]: {
        fr:{ q:"Tu sÃ©curises plutÃ´t par :", a:[["Soutien.","Sage"],["Verrouillage.","Deadlock"]] },
        en:{ q:"You secure more through:", a:[["Support.","Sage"],["Lockdown.","Deadlock"]] }
      },
      [pairKey("Chamber","Deadlock")]: {
        fr:{ q:"Tu prÃ©fÃ¨res :", a:[["Duel et prÃ©cision.","Chamber"],["Stopper net.","Deadlock"]] },
        en:{ q:"You prefer:", a:[["Duel and precision.","Chamber"],["Hard stop.","Deadlock"]] }
      },
    }
  };

  // -------------------------
  // UI refs
  // -------------------------
  const introCard = $("introCard");
  const quizCard = $("quizCard");
  const tiebreakCard = $("tiebreakCard");
  const resultCard = $("resultCard");

  const langSel = $("langSel");
  const startBtn = $("startBtn");
  const restartBtn = $("restartBtn");
  const backBtn = $("backBtn");

  const qText = $("qText");
  const answersEl = $("answers");
  const progressEl = $("progress");
  const phaseHint = $("phaseHint");

  const tbTitle = $("tbTitle");
  const tbPair = $("tbPair");
  const tbText = $("tbText");
  const tbAnswers = $("tbAnswers");

  const mainAgent = $("mainAgent");
  const mainExplain = $("mainExplain");
  const alt1Agent = $("alt1Agent");
  const alt2Agent = $("alt2Agent");
  const alt1Why = $("alt1Why");
  const alt2Why = $("alt2Why");
  const scoreLines = $("scoreLines");

  const retryBtn = $("retryBtn");
  const copyBtn = $("copyBtn");

  // Text nodes
  const langLabel = $("langLabel");
  const title = $("title");
  const subtitle = $("subtitle");
  const pill1 = $("pill1");
  const pill2 = $("pill2");
  const pill3 = $("pill3");
  const disclaimer = $("disclaimer");
  const pillMain = $("pillMain");
  const pillAlt = $("pillAlt");
  const alt1Title = $("alt1Title");
  const alt2Title = $("alt2Title");
  const scoreTitle = $("scoreTitle");
  const noteMeta = $("noteMeta");
  const subbrand = $("subbrand");
  const footerTitle = $("footerTitle");
  const footerSubtitle = $("footerSubtitle");

  // -------------------------
  // State
  // -------------------------
  let lang = "fr";

  // phase: "role" | "agent"
  let phase = "role";

  let idx = 0;
  let history = []; // {phase, qIndex, awardedKey}

  let roleScores = initScoreMap(["duelist","initiator","controller","sentinel"]);
  let chosenRole = null;

  let agentScores = {};      // map agent -> points
  let chosenAgents = [];     // top 3
  let pendingTie = null;     // { kind:"agent", roleKey, bracketList, winner, nextIndex }

  // -------------------------
  // Language setup
  // -------------------------
  function setLanguage(newLang){
    lang = newLang;
    document.documentElement.lang = lang;

    langLabel.textContent = LABELS[lang].language;
    restartBtn.textContent = LABELS[lang].restart;
    startBtn.textContent = LABELS[lang].start;
    backBtn.textContent = LABELS[lang].back;

    subbrand.textContent = "Agent Selector â€¢ Valorant";

    title.textContent = LABELS[lang].introTitle;
    subtitle.textContent = LABELS[lang].introSub;

    pill1.textContent = (lang==="fr") ? "10 + 10 questions" : "10 + 10 questions";
    pill2.textContent = (lang==="fr") ? "RÃ´le â†’ Agent" : "Role â†’ Agent";
    pill3.textContent = (lang==="fr") ? "DÃ©partage si Ã©galitÃ©" : "Tiebreak if tied";

    disclaimer.textContent = (lang==="fr")
      ? "Note : ce quiz donne une recommandation basÃ©e sur ton style. Mets Ã  jour la liste dâ€™agents si Riot en ajoute."
      : "Note: this quiz recommends based on your playstyle. Update the agent list if Riot adds new agents.";

    tbTitle.textContent = LABELS[lang].tiebreakTitle;

    pillMain.textContent = (lang==="fr") ? "Agent principal" : "Main agent";
    pillAlt.textContent  = (lang==="fr") ? "Alternatives" : "Alternatives";
    alt1Title.textContent = LABELS[lang].alt1;
    alt2Title.textContent = LABELS[lang].alt2;
    scoreTitle.textContent = LABELS[lang].scores;

    retryBtn.textContent = LABELS[lang].retake;
    copyBtn.textContent = LABELS[lang].copy;
    noteMeta.textContent = LABELS[lang].note;

    footerTitle.textContent = LABELS[lang].socialsTitle;
    footerSubtitle.textContent = LABELS[lang].socialsSub;

    if(quizCard.style.display !== "none") renderQuestion();
    if(tiebreakCard.style.display !== "none" && pendingTie) renderTiebreak();
    if(resultCard.style.display !== "none") renderAgentScores();
  }

  // -------------------------
  // Navigation
  // -------------------------
  function showOnly(which){
    introCard.style.display = (which==="intro") ? "" : "none";
    quizCard.style.display  = (which==="quiz") ? "" : "none";
    tiebreakCard.style.display = (which==="tiebreak") ? "" : "none";
    resultCard.style.display = (which==="result") ? "" : "none";
  }

  function start(){
    phase = "role";
    idx = 0;
    history = [];
    chosenRole = null;

    roleScores = initScoreMap(["duelist","initiator","controller","sentinel"]);
    agentScores = {};
    chosenAgents = [];
    pendingTie = null;

    showOnly("quiz");
    renderQuestion();
  }

  function currentQuestionSet(){
    if(phase === "role") return ROLE_QUESTIONS;
    return AGENT_QUESTIONS_BY_ROLE[chosenRole] || [];
  }

  function renderQuestion(){
    const qs = currentQuestionSet();
    const q = qs[idx][lang];

    const total = qs.length;
    const phaseLabel = (phase === "role") ? LABELS[lang].phaseRole : LABELS[lang].phaseAgent;
    phaseHint.textContent = phaseLabel;

    // Progress text: show as "Phase 1: x/10" etc
    if(phase === "role"){
      progressEl.textContent = (lang==="fr")
        ? `RÃ´le â€¢ Question ${idx+1} / ${total}`
        : `Role â€¢ Question ${idx+1} / ${total}`;
    } else {
      progressEl.textContent = (lang==="fr")
        ? `Agent (${chosenRole}) â€¢ Question ${idx+1} / ${total}`
        : `Agent (${chosenRole}) â€¢ Question ${idx+1} / ${total}`;
    }

    qText.textContent = q.q;
    answersEl.innerHTML = "";

    q.a.forEach(([label, awardKey]) => {
      const btn = document.createElement("button");
      btn.className = "ans";
      btn.type = "button";
      btn.textContent = label;
      btn.addEventListener("click", () => chooseAnswer(awardKey));
      answersEl.appendChild(btn);
    });

    backBtn.style.display = (idx>0) ? "" : "none";
  }

  function chooseAnswer(awardKey){
    // awardKey is roleKey in phase role, or agentName in phase agent
    history.push({ phase, qIndex: idx, awardedKey: awardKey });

    if(phase === "role"){
      roleScores[awardKey]++;

      idx++;
      if(idx < ROLE_QUESTIONS.length){
        renderQuestion();
      } else {
        // Fix role
        chosenRole = finalizeRole();
        // Switch to agent phase
        phase = "agent";
        idx = 0;
        agentScores = initScoreMap(AGENTS_BY_ROLE[chosenRole]);
        showOnly("quiz");
        renderQuestion();
      }
    } else {
      agentScores[awardKey]++;

      idx++;
      const qs = AGENT_QUESTIONS_BY_ROLE[chosenRole];
      if(idx < qs.length){
        renderQuestion();
      } else {
        // Resolve top-3 agents (with tiebreak if needed)
        resolveTop3AgentsWithTies();
      }
    }
  }

  function goBack(){
    if(idx<=0) return;

    idx--;
    const last = history.pop();
    if(!last) return;

    // revert the score
    if(last.phase === "role"){
      roleScores[last.awardedKey] = clamp0(roleScores[last.awardedKey]-1);
      phase = "role";
      chosenRole = null; // we are in role phase anyway
    } else {
      agentScores[last.awardedKey] = clamp0(agentScores[last.awardedKey]-1);
      phase = "agent";
    }

    renderQuestion();
  }

  function finalizeRole(){
    // If tie, you can plug a role-tiebreak here later.
    // For now: take highest; if tie, take the first in sorted order.
    const ordered = Object.entries(roleScores)
      .map(([k,v])=>({k,v}))
      .sort((a,b)=> b.v - a.v || a.k.localeCompare(b.k));
    return ordered[0].k;
  }

  // -------------------------
  // Agent tie resolution (Top 3)
  // Strategy:
  // - We pick #1 then #2 then #3.
  // - If tie for a pick, we ask tiebreak(s) (bracket) among tied agents.
  // - After adding +1 to winner, we recalc and continue.
  // -------------------------
  let pickStage = 0; // 0->pick #1, 1->#2, 2->#3
  let lockedWinners = []; // already picked

  function resolveTop3AgentsWithTies(){
    pickStage = 0;
    lockedWinners = [];
    pendingTie = null;
    continuePicking();
  }

  function continuePicking(){
    if(pickStage >= 3){
      chosenAgents = lockedWinners.slice(0,3);
      finalizeResults();
      return;
    }

    // Find best remaining
    const remaining = Object.keys(agentScores).filter(a => !lockedWinners.includes(a));
    if(remaining.length === 0){
      // fallback
      finalizeResults();
      return;
    }

    let max = -Infinity;
    remaining.forEach(a => { max = Math.max(max, agentScores[a]); });
    const tied = remaining.filter(a => agentScores[a] === max);

    if(tied.length === 1){
      lockedWinners.push(tied[0]);
      pickStage++;
      continuePicking();
      return;
    }

    // Need tiebreak among tied for this pick
    startAgentTiebreak(tied);
  }

  function startAgentTiebreak(tiedAgents){
    // bracket among tiedAgents: a0 vs a1 -> winner vs a2 -> ...
    pendingTie = {
      kind: "agent",
      roleKey: chosenRole,
      bracketList: tiedAgents.slice(),
      winner: tiedAgents[0],
      nextIndex: 1,
      pickStage: pickStage
    };
    showOnly("tiebreak");
    renderTiebreak();
  }

  function renderTiebreak(){
    const roleKey = pendingTie.roleKey;
    const a = pendingTie.winner;
    const b = pendingTie.bracketList[pendingTie.nextIndex];

    tbPair.textContent = `${a} vs ${b}`;

    const bank = TIEBREAK_BY_ROLE[roleKey];
    const key = pairKey(a,b);
    const tb = bank && bank[key];

    // Fallback (if missing)
    const question = tb ? tb[lang].q : (lang==="fr" ? "Question bonus :" : "Bonus question:");
    const answers = tb ? tb[lang].a : [
      [`Option A (${a})`, a],
      [`Option B (${b})`, b]
    ];

    tbText.textContent = question;
    tbAnswers.innerHTML = "";

    answers.forEach(([label, agentName]) => {
      const btn = document.createElement("button");
      btn.className = "ans";
      btn.type = "button";
      btn.textContent = label;
      btn.addEventListener("click", () => chooseTiebreak(agentName));
      tbAnswers.appendChild(btn);
    });
  }

  function chooseTiebreak(chosenAgent){
    // Break tie by +1
    agentScores[chosenAgent]++;

    // Update bracket winner
    pendingTie.winner = chosenAgent;
    pendingTie.nextIndex++;

    if(pendingTie.nextIndex < pendingTie.bracketList.length){
      renderTiebreak();
      return;
    }

    // Bracket done -> winner gets selected for this pick stage
    const winner = pendingTie.winner;
    pendingTie = null;

    // lock winner and continue picking
    lockedWinners.push(winner);
    pickStage++;
    showOnly("quiz"); // briefly show quiz? we go to results or next picking
    continuePicking();
  }

  // -------------------------
  // Final results
  // -------------------------
  function finalizeResults(){
    // If we ended early, ensure we have 3 picks
    const ordered = sortedKeys(agentScores).filter(a => !lockedWinners.includes(a));
    while(lockedWinners.length < 3 && ordered.length){
      lockedWinners.push(ordered.shift());
    }
    chosenAgents = lockedWinners.slice(0,3);
    finalizeResultsUI();
  }

  function finalizeResultsUI(){
    const [main, alt1, alt2] = chosenAgents;

    mainAgent.textContent = main || "â€”";
    alt1Agent.textContent = alt1 || "â€”";
    alt2Agent.textContent = alt2 || "â€”";

    // Explain role + show it as main explanation
    const roleExplain = LABELS[lang].roleExplain[chosenRole] || "";
    mainExplain.textContent = (lang==="fr")
      ? `RÃ´le dÃ©tectÃ© : ${chosenRole.toUpperCase()} â€” ${roleExplain}`
      : `Detected role: ${chosenRole.toUpperCase()} â€” ${roleExplain}`;

    alt1Why.textContent = (lang==="fr")
      ? `Alternative cohÃ©rente dans ${chosenRole.toUpperCase()} (2e meilleur score).`
      : `Coherent alternative within ${chosenRole.toUpperCase()} (2nd best score).`;

    alt2Why.textContent = (lang==="fr")
      ? `Alternative cohÃ©rente dans ${chosenRole.toUpperCase()} (3e meilleur score).`
      : `Coherent alternative within ${chosenRole.toUpperCase()} (3rd best score).`;

    renderAgentScores();
    showOnly("result");
  }

  function renderAgentScores(){
    scoreTitle.textContent = LABELS[lang].scores;
    scoreLines.innerHTML = "";

    const ordered = Object.entries(agentScores)
      .map(([k,v])=>({k,v}))
      .sort((a,b)=> b.v - a.v || a.k.localeCompare(b.k));

    ordered.forEach(({k,v}) => {
      const line = document.createElement("div");
      line.className = "scoreLine";
      const left = document.createElement("div");
      left.innerHTML = `<b>${k}</b>`;
      const right = document.createElement("div");
      right.textContent = String(v);
      line.appendChild(left);
      line.appendChild(right);
      scoreLines.appendChild(line);
    });
  }

  async function copyResult(){
    const txt = (lang==="fr")
      ? `RÃ©sultat Falka:\n- RÃ´le: ${chosenRole}\n- Agent: ${mainAgent.textContent}\n- Alternatives: ${alt1Agent.textContent}, ${alt2Agent.textContent}\n- Scores: ${Object.entries(agentScores).map(([k,v])=>`${k} ${v}`).join(", ")}`
      : `Falka result:\n- Role: ${chosenRole}\n- Agent: ${mainAgent.textContent}\n- Alternatives: ${alt1Agent.textContent}, ${alt2Agent.textContent}\n- Scores: ${Object.entries(agentScores).map(([k,v])=>`${k} ${v}`).join(", ")}`;

    try{
      await navigator.clipboard.writeText(txt);
      copyBtn.textContent = LABELS[lang].copied;
      setTimeout(()=> copyBtn.textContent = LABELS[lang].copy, 1200);
    } catch(e){
      alert((lang==="fr") ? "Copie impossible (navigateur)." : "Copy failed (browser).");
    }
  }

  // -------------------------
  // Events
  // -------------------------
  langSel.addEventListener("change", (e) => setLanguage(e.target.value));
  startBtn.addEventListener("click", start);
  restartBtn.addEventListener("click", () => showOnly("intro"));
  backBtn.addEventListener("click", goBack);
  retryBtn.addEventListener("click", start);
  copyBtn.addEventListener("click", copyResult);

  // Init
  setLanguage(langSel.value);

})();
</script>
</body>
</html>
